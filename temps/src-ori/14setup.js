var playState=new Object;playState.init=function(){this.menuInfo=new Object},playState.create=function(){window.famobi.onOrientationChange((function(){resizeGame()})),resizeGame=function(a,t){Math.min(fenster.innerWidth,document.documentElement.clientWidth),Math.min(fenster.innerHeight,document.documentElement.clientHeight);if("portrait"==window.famobi.getOrientation()){e.landscape=!1,game.scale.setGameSize(1080,1920),e.gameCanvas.x=game.width/2+30,e.gameCanvas.y=game.height/2-50,e.gameCanvas.angle=-90,projectInfo.tutorial&&(e.skipText.x=game.world.centerX+30,e.skipText.y=game.world.centerY+230,e.tutorialText.x=game.world.centerX+30,e.tutorialText.y=320,game.device.touch&&(e.hand.scale.x=-1,e.tutStage>=6&&(e.hand.angle=0,e.pointerStart=e.pointerStartP,e.pointerEnd=e.pointerEndP),6!=e.tutStage&&7!=e.tutStage||(e.hand.x=e.pointerStart.x,e.hand.y=e.pointerStart.y),e.tutStage>=8&&(e.hand.x=e.pointerStart.x-e.pointerProgress,e.hand.y=e.pointerStart.y,e.powerBarMask.x=0,e.powerBarMask.y=e.pointerProgress))),e.guiPanel1.x=game.width/2-e.guiPanel2.width/2-20+25,e.guiPanel1.y=100,e.guiPanel2.x=game.width/2+25,e.guiPanel2.y=100,e.guiPanel3.x=game.width/2+e.guiPanel2.width/2+20+25,e.guiPanel3.y=100,e.timerText.x=e.guiPanel3.x+e.guiPanel3.width/2,e.timerText.y=100,e.scoreText.x=game.width/2+25,e.scoreText.y=100,e.multiplierText.x=e.guiPanel1.x-e.guiPanel1.width/2,e.multiplierText.y=100,e.menuButton.x=game.width-65,e.menuButton.y=10,e.menuButton.scale=new Point(.35,.35),game.device.touch&&(e.powerBar.angle=-90,e.powerBar.x=60,e.powerBar.y=game.height/2,e.powerBarCueMask.clear(),e.powerBarCueMask.beginFill(16777215),e.powerBarCueMask.drawRect(e.powerBar.x,e.powerBar.y-250,26,500),e.powerBarMask.clear(),e.powerBarMask.beginFill(16711680),e.powerBarMask.drawRect(e.powerBar.x-26,e.powerBar.y-750,26,500)),e.successIcon.angle=90,e.gameOverPanel.x=game.width/2+35,e.gameOverPanel.y=game.height/2,e.gameOverPanelBG.angle=-90,e.GOhighScoreIcon.x=80,e.GOhighScoreIcon.y=-346,e.gameOverPanel.text2.x=145,e.gameOverPanel.text2.y=-349,e.playerWin.x=-240,e.playerWin.y=-405,e.popUpPanel.x=game.width/2+25,e.popUpPanel.y=game.height/2,e.popUpPanelBG.angle=0;let a=famobi.hasFeature("external_mute");e.playButtonPU.x=0,e.playButtonPU.y=-90,e.muteButtonPU.x=-170,e.muteButtonPU.y=130,e.replayButtonPU.x=a?-85:0,e.replayButtonPU.y=130,e.quitButtonPU.x=a?85:170,e.quitButtonPU.y=130,e.humanIcon.x=170,e.humanIcon.y=game.height-95,e.humanIcon.scale=new Point(.35,.35),e.aiIcon.x=170,e.aiIcon.y=game.height-0,e.aiIcon.anchor=new Point(0,1),e.aiIcon.scale=new Point(.35,.35),e.turnArrow1.x=125,e.turnArrow1.scale=new Point(.5,.5),e.turnArrow1.y=game.height-110,e.turnArrow2.x=125,e.turnArrow2.scale=new Point(.5,.5),e.turnArrow2.y=game.height-20,e.rackSolids.x=game.width/2+25,e.rackSolids.y=game.height-100,e.rackStripes.x=game.width/2+25,e.rackStripes.y=game.height-10,"SOLIDS"==e.p1TargetType&&(e.rackStripes.y=game.height-10,e.rackSolids.y=game.height-100),"STRIPES"==e.p1TargetType&&(e.rackSolids.y=game.height-10,e.rackStripes.y=game.height-100),e.spinSetter.x=game.width-135,e.spinSetter.y=game.height-105,e.spinSetterZoom.x=game.width/2+30,e.spinSetterZoom.y=game.height/2-50,e.foulWindow.x=game.width/2+25,e.foulWindow.y=game.height/2,e.quitButton2.y=250,e.replayButton.y=250}else{e.landscape=!0,game.scale.setGameSize(1920,1080),e.gameCanvas.x=game.width/2,e.gameCanvas.y=game.height/2-75,projectInfo.tutorial&&(e.skipText.x=game.world.centerX,e.skipText.y=game.world.centerY+230,e.tutorialText.x=game.world.centerX,e.tutorialText.y=game.world.centerY-320,game.device.touch&&(e.hand.scale.x=1,e.hand.scale.y=1,e.tutStage>=6&&(e.hand.angle=180,e.pointerStart=e.pointerStartL,e.pointerEnd=e.pointerEndL),6!=e.tutStage&&7!=e.tutStage||(e.hand.x=e.pointerStart.x,e.hand.y=e.pointerStart.y),e.tutStage>=8&&(e.hand.x=e.pointerStart.x-e.pointerProgress,e.hand.y=e.pointerStart.y,e.powerBarMask.y=0,e.powerBarMask.x=-e.pointerProgress))),e.rackSolids.x=game.width/4,e.rackSolids.y=game.height-40,e.rackStripes.x=3*game.width/4,e.rackStripes.y=game.height-40,"SOLIDS"==e.p1TargetType&&(e.rackSolids.x=game.width/4,e.rackStripes.x=3*game.width/4),"STRIPES"==e.p1TargetType&&(e.rackSolids.x=3*game.width/4,e.rackStripes.x=game.width/4),e.guiPanel1.x=game.width/2-e.guiPanel2.width/2-20,e.guiPanel1.y=game.height-40,e.guiPanel2.x=game.width/2,e.guiPanel2.y=game.height-40,e.guiPanel3.x=game.width/2+e.guiPanel2.width/2+20,e.guiPanel3.y=game.height-40,e.timerText.x=e.guiPanel3.x+e.guiPanel3.width/2,e.timerText.y=game.height-40,e.scoreText.x=game.width/2,e.scoreText.y=game.height-40,e.multiplierText.x=e.guiPanel1.x-e.guiPanel1.width/2,e.multiplierText.y=game.height-40,e.gameCanvas.angle=0,e.humanIcon.x=120,e.humanIcon.y=game.height-20,e.humanIcon.anchor=new Point(0,1),e.humanIcon.scale=new Point(.4,.4),e.aiIcon.x=game.width-120-e.aiIcon.width,e.aiIcon.y=game.height-20,e.aiIcon.anchor=new Point(0,1),e.aiIcon.scale=new Point(.4,.4),e.turnArrow1.x=75,e.turnArrow1.y=game.height-40,e.turnArrow2.scale=new Point(.5,.5),e.turnArrow2.x=game.width-75,e.turnArrow2.y=game.height-40,e.turnArrow2.scale=new Point(-.5,.5),e.menuButton.x=game.width-80,e.menuButton.y=20,e.menuButton.scale=new Point(.5,.5),e.spinSetter.x=game.width-90,e.spinSetter.y=game.height/2,e.spinSetterZoom.x=game.width/2,e.spinSetterZoom.y=game.height/2-75,game.device.touch&&(e.powerBar.angle=-90,e.powerBar.x=100,e.powerBar.y=game.height/2,e.powerBarCueMask.clear(),e.powerBarCueMask.beginFill(16777215),e.powerBarCueMask.drawRect(e.powerBar.x,e.powerBar.y-250,26,500),e.powerBarMask.clear(),e.powerBarMask.beginFill(16711680),e.powerBarMask.drawRect(e.powerBar.x-26,e.powerBar.y-750,26,500)),e.successIcon.angle=0,e.gameOverPanel.x=game.width/2,e.gameOverPanel.y=game.height/2-10-75,e.gameOverPanelBG.angle=0,e.GOhighScoreIcon.x=220,e.GOhighScoreIcon.y=-246,e.gameOverPanel.text2.x=285,e.gameOverPanel.text2.y=-249,e.playerWin.x=-400,e.playerWin.y=-265,e.popUpPanel.x=game.width/2,e.popUpPanel.y=game.height/2-75,e.popUpPanelBG.angle=0;let a=famobi.hasFeature("external_mute");e.playButtonPU.x=0,e.playButtonPU.y=-90,e.muteButtonPU.x=-170,e.muteButtonPU.y=130,e.replayButtonPU.x=a?-85:0,e.replayButtonPU.y=130,e.quitButtonPU.x=a?85:170,e.quitButtonPU.y=130,e.foulWindow.x=game.width/2,e.foulWindow.y=game.height/2-75,e.quitButton2.y=170,e.replayButton.y=170}String(Math.abs(fenster.innerHeight-document.getElementById("mygame").clientHeight)/2);e.debugText.x=game.width-25,e.debugText.y=30,e.successIcon.x=0,e.successIcon.y=0},this.gameInfo=new Object;var e=this.gameInfo;function a(){playState.resumeGame()}function t(){0==Sound.slave?(Sound.setMute(!1),e.muteButtonPU.setFrames(1,0,1,0),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_VOLUMECHANGE,{bgmVolume:0,sfxVolume:1})):(Sound.setMute(!0),e.muteButtonPU.setFrames(3,2,3,2),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_VOLUMECHANGE,{bgmVolume:0,sfxVolume:0})),playState.resumeGame()}function n(){1!=e.foulWindow.visible&&0==e.gameOver&&(window.famobi_analytics.trackScreen("SCREEN_PAUSE"),e.gameRunning=!1,e.popUpPanel.visible=!0,e.quitButtonPU.input.enabled=!0,e.replayButtonPU.input.enabled=!0,e.playButtonPU.input.enabled=!0,e.muteButtonPU.input.enabled=!0)}function r(){game.add.tween(e.guiCanvas).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0),game.add.tween(e.guiBaseCanvas).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0);game.add.tween(e.gameCanvas).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0).onComplete.add((function(){if(e.gameOver)return void game.state.start("mainMenu");window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:projectInfo.levelName,reason:"quit"}).then((function(){game.state.start("mainMenu")}),(function(){game.state.start("mainMenu")}))}),this)}function o(){projectInfo.lastBreaker="none",e.gameOver?window.famobi_analytics.trackEvent("EVENT_LEVELRESTART",{levelName:projectInfo.levelName}).then((function(){game.state.start("play")}),(function(){game.state.start("play")})):Promise.all([window.famobi_analytics.trackEvent("EVENT_LEVELFAIL",{levelName:projectInfo.levelName,reason:"quit"}),window.famobi_analytics.trackEvent("EVENT_LEVELRESTART",{levelName:projectInfo.levelName})]).then((function(){game.state.start("play")}),(function(){game.state.start("play")}))}e.adjustmentScale=2.3,e.settingSpin=!1,e.pointerStartL=new Point(-850,-200),e.pointerStartP=new Point(100,-450),e.pointerEndL=new Point(-850,-50),e.pointerEndP=new Point(-80,-450),e.pointerProgress=0,e.numLevels=6,e.ballRadius=1e3*e.adjustmentScale,e.physScale=.01,e.friction=1.5,e.gameOver=!1,e.counter=0,e.transferCounter=0,e.bonusStarOn=!1,e.starNumber=2,e.timerStarted=!1,e.ballPotted=!1,e.ballsPotted=0,e.fouled=!1,e.multiplier=1,e.frictionSpeedThreshold=85,e.pocketRadius=2250,e.minVelocity=2,e.cushionRestitution=.6,e.ballRestitution=.94,e.maxPower=5e3,e.trial=!1,e.overlap=!1,e.cueBallInHand=!0,e.preventAim=!1,e.preventSetPower=!1,e.preventUpdateCue=!1,e.cueSet=!1,e.shotRunning=!1,e.settingPower=!1,e.executeStrike=!1,e.beginStrike=!1,e.cueTweenComplete=!1,e.firstTouch=!1,e.tutStage=0,e.shotComplete=!1,e.rulingsApplied=!1,e.shotNum=0,e.scratched=!1,e.trial=!1,e.pottedBallArray=new Array,e.time=0,e.scratchFoulShown=!1,e.p1TargetType="ANY",e.p2TargetType="ANY",e.scratch=!1,e.foulMessage="",e.shotNum=0,e.turnExtended=!1,e.ballsPottedSameType=!1,e.typesPotted="",e.trial=!1,e.initVars=!1,e.shotReset=!0,e.drawGuide=!0,e.allowTransferPoints=!1,e.placedInCenter=!1,e.foulDisplayComplete=!0,e.transfer1Complete=!0,e.transfer2Complete=!0,e.aimDirectionVector=new Vector2D(1,0).normalize(),function(){0==projectInfo.levelComplete?projectInfo.level=1:projectInfo.level++;0==projectInfo.tutorial&&window.famobi_analytics.trackScreen("SCREEN_LEVEL")}(),function(){0==projectInfo.levelComplete?projectInfo.score=0:projectInfo.levelComplete=!1;switch(projectInfo.level){case 1:projectInfo.startTime=50;break;case 2:projectInfo.startTime=60;break;case 3:projectInfo.startTime=80;break;case 4:projectInfo.startTime=90;break;case 5:projectInfo.startTime=100;break}projectInfo.level>=e.numLevels&&(projectInfo.startTime-=10)}(),function(){e.bgCanvas=new Phaser.Group(game,game.stage,"bgCanvas"),e.guiBaseCanvas=new Phaser.Group(game,game.stage,"guiBaseCanvas"),e.gameCanvas=new Phaser.Group(game,game.stage,"gameCanvas"),e.gameCanvas.x=game.width/2,e.gameCanvas.y=game.height/2-15,e.tableCanvas=new Phaser.Group(game,e.gameCanvas,"tableCanvas"),e.tableCanvas.y+=2,e.timerCanvas=new Phaser.Group(game,e.gameCanvas,"timerCanvas"),e.ballCanvas=new Phaser.Group(game,e.gameCanvas,"ballCanvas"),e.guiCanvas=new Phaser.Group(game,game.stage,"guiCanvas"),e.cueBaseCanvas=new Phaser.Group(game,e.gameCanvas,"cueCanvas"),e.cueCanvas=new Phaser.Group(game,e.cueBaseCanvas,"cueCanvas"),e.guideCanvas=new Phaser.Group(game,e.gameCanvas,"guideCanvas"),e.tutCanvas=new Phaser.Group(game,e.gameCanvas,"tutCanvas");game.add.tween(e.cueBaseCanvas).from({alpha:0},1e3,Phaser.Easing.Linear.None,!0,500),game.add.tween(e.guiCanvas).from({alpha:0},1e3,Phaser.Easing.Linear.None,!0,500),game.add.tween(e.guiBaseCanvas).from({alpha:0},1e3,Phaser.Easing.Linear.None,!0,500),game.add.tween(e.gameCanvas).from({alpha:0},1e3,Phaser.Easing.Linear.None,!0,500)}(),function(){e.pockets=new Phaser.Sprite(game,0,0,"pockets"),e.pockets.anchor=new Phaser.Point(.5,.5),e.tableCanvas.add(e.pockets),e.tunnelCanvas=new Phaser.Group(game,e.tableCanvas,"tunnels"),e.cloth=new Phaser.Sprite(game,0,0,"cloth"),e.cloth.anchor=new Phaser.Point(.5,.5),e.tableCanvas.add(e.cloth),e.shadowCanvas=new Phaser.Group(game,e.tableCanvas,"shadows"),e.tableTop=new Phaser.Sprite(game,0,0,"tableTop"),e.tableTop.anchor=new Phaser.Point(.5,.5),e.tableCanvas.add(e.tableTop);var a,t,n=600*e.adjustmentScale;e.pocketArray=new Array,e.vertexArray=new Array,e.lineArray=new Array,(t=new Object).position=new Vector2D(-50*n-e.pocketRadius/2,-25*n-e.pocketRadius/4),t.dropPosition=new Vector2D(-51*n-e.pocketRadius/2,-26*n-e.pocketRadius/4),t.starPosition=new Vector2D(-50.4*n-e.pocketRadius/2,-25.8*n-e.pocketRadius/4),t.id=0,e.pocketArray.push(t),(t=new Object).position=new Vector2D(0*n,-25*n-e.pocketRadius),t.dropPosition=new Vector2D(0*n,-25.5*n-e.pocketRadius),t.starPosition=new Vector2D(-.2*n,-25.5*n-e.pocketRadius),t.id=1,e.pocketArray.push(t),(t=new Object).position=new Vector2D(50*n+e.pocketRadius/2,-25*n-e.pocketRadius/4),t.dropPosition=new Vector2D(51*n+e.pocketRadius/2,-26*n-e.pocketRadius/4),t.starPosition=new Vector2D(50*n+e.pocketRadius/2,-26*n-e.pocketRadius/4),t.id=2,e.pocketArray.push(t),(t=new Object).position=new Vector2D(-50*n-e.pocketRadius/2,25*n+e.pocketRadius/4),t.dropPosition=new Vector2D(-51*n-e.pocketRadius/2,26*n+e.pocketRadius/4),t.starPosition=new Vector2D(-50.3*n-e.pocketRadius/2,25.5*n+e.pocketRadius/4),t.id=3,e.pocketArray.push(t),(t=new Object).position=new Vector2D(0*n,25*n+e.pocketRadius),t.dropPosition=new Vector2D(0*n,25.5*n+e.pocketRadius),t.starPosition=new Vector2D(-.2*n,25.3*n+e.pocketRadius),t.id=4,e.pocketArray.push(t),(t=new Object).position=new Vector2D(50*n+e.pocketRadius/2,25*n+e.pocketRadius/4),t.dropPosition=new Vector2D(51*n+e.pocketRadius/2,26*n+e.pocketRadius/4),t.starPosition=new Vector2D(50*n+e.pocketRadius/2,27*n-e.pocketRadius/4),t.id=5,e.pocketArray.push(t);(o=new Object).name="AB",o.p1=new Vector2D(-50*n,-29*n),o.p2=new Vector2D(-46*n,-25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="B",e.vertexArray.push(a),(o=new Object).name="BC",o.p1=new Vector2D(-46*n,-25*n),o.p2=new Vector2D(-4*n,-25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="C",e.vertexArray.push(a),(o=new Object).name="CD",o.p1=new Vector2D(-4*n,-25*n),o.p2=new Vector2D(-2*n,-29*n),e.lineArray.push(o),(o=new Object).name="EF",o.p1=new Vector2D(2*n,-29*n),o.p2=new Vector2D(4*n,-25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="F",e.vertexArray.push(a),(o=new Object).name="FG",o.p1=new Vector2D(4*n,-25*n),o.p2=new Vector2D(46*n,-25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="G",e.vertexArray.push(a),(o=new Object).name="GH",o.p1=new Vector2D(46*n,-25*n),o.p2=new Vector2D(50*n,-29*n),e.lineArray.push(o),(o=new Object).name="IJ",o.p1=new Vector2D(54*n,-25*n),o.p2=new Vector2D(50*n,-21*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="J",e.vertexArray.push(a),(o=new Object).name="JK",o.p1=new Vector2D(50*n,-21*n),o.p2=new Vector2D(50*n,21*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="K",e.vertexArray.push(a),(o=new Object).name="KL",o.p1=new Vector2D(50*n,21*n),o.p2=new Vector2D(54*n,25*n),e.lineArray.push(o),(o=new Object).name="MN",o.p1=new Vector2D(50*n,29*n),o.p2=new Vector2D(46*n,25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="N",e.vertexArray.push(a),(o=new Object).name="NO",o.p1=new Vector2D(46*n,25*n),o.p2=new Vector2D(4*n,25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="O",e.vertexArray.push(a),(o=new Object).name="OP",o.p1=new Vector2D(4*n,25*n),o.p2=new Vector2D(2*n,29*n),e.lineArray.push(o),(o=new Object).name="QR",o.p1=new Vector2D(-2*n,29*n),o.p2=new Vector2D(-4*n,25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="R",e.vertexArray.push(a),(o=new Object).name="RS",o.p1=new Vector2D(-4*n,25*n),o.p2=new Vector2D(-46*n,25*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="S",e.vertexArray.push(a),(o=new Object).name="ST",o.p1=new Vector2D(-46*n,25*n),o.p2=new Vector2D(-50*n,29*n),e.lineArray.push(o),(o=new Object).name="UV",o.p1=new Vector2D(-54*n,25*n),o.p2=new Vector2D(-50*n,21*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="V",e.vertexArray.push(a),(o=new Object).name="VW",o.p1=new Vector2D(-50*n,21*n),o.p2=new Vector2D(-50*n,-21*n),e.lineArray.push(o),(a=new Object).position=new Vector2D(o.p2.x,o.p2.y),a.name="W",e.vertexArray.push(a),(o=new Object).name="WX",o.p1=new Vector2D(-50*n,-21*n),o.p2=new Vector2D(-54*n,-25*n),e.lineArray.push(o);game.add.graphics(e.gameCanvas.x,e.gameCanvas.y);for(var r=0;r<e.lineArray.length;r++){var o;(o=e.lineArray[r]).direction=new Vector2D(o.p2.x-o.p1.x,o.p2.y-o.p1.y).normalize(),o.normal=o.direction.getLeftNormal();var i=o.normal.times(e.ballRadius);o.p3=o.p1.plus(i),o.p4=o.p2.plus(i);var s=o.normal.times(.8*e.ballRadius);o.p5=o.p1.plus(s),o.p6=o.p2.plus(s)}}(),function(){e.ballArray=new Array;var a=setBallPositions(e);e.numBalls=a.length;for(var t=0;t<e.numBalls;t++){var n=new Object;switch(n.shadow=new Phaser.Sprite(game,0,0,"shadow"),e.shadowCanvas.add(n.shadow),n.shadow.anchor=new Point(.5,.5),n.shadow.width=e.ballRadius*e.physScale*4,n.shadow.height=e.ballRadius*e.physScale*4,n.shadow.alpha=.7,n.marker=new Phaser.Sprite(game,0,0,"marker"),e.ballCanvas.addChild(n.marker),n.marker.anchor=new Point(.5,.5),n.marker.animations.add("markerAnim",Phaser.Animation.generateFrameNames("marker",1,60,"",4),60,!0),n.marker.visible=!1,t){case 0:0;break;case 1:12;break;case 2:13;break;case 3:8;break;case 4:14;break;case 5:3;break;case 6:11;break;case 7:4;break;case 8:15;break;case 9:5;break;case 10:1;break;case 11:6;break;case 12:10;break;case 13:7;break;case 14:9;break;case 15:2;break}n.mc=new Ball(e.ballRadius*e.physScale,t),e.ballCanvas.add(n.mc),0==t&&(n.mover=new Phaser.Sprite(game,0,0,"mover"),e.ballCanvas.add(n.mover),n.mover.anchor=new Point(.5,.5),n.mover.inputEnabled=!0,n.mover.visible=!1),t<8&&0!=t&&(n.targetType="SOLIDS"),t>8&&(n.targetType="STRIPES"),8==t&&(n.targetType="8 BALL"),n.position=new Vector2D(a[t].x,a[t].y),n.velocity=new Vector2D(0,0),n.lastCollisionObject=null,n.id=t,n.active=!0,n.firstContact=!1,n.contactArray=new Array,0==t&&(n.screw=0,n.english=0,n.deltaScrew=new Vector2D(0,0)),n.grip=1,n.ySpin=0,n.pocketTweenComplete=!0,n.propelling=!1,e.ballArray.push(n)}}(),e.guide=new Phaser.Graphics(game),e.guideCanvas.addChild(e.guide),function(){e.debugText=new Phaser.BitmapText(game,game.width-1,20,"font7","",34),e.guiCanvas.addChild(e.debugText),e.debugText.anchor.x=1,e.debugText.visible=!1,e.spinSetter=new Phaser.Sprite(game,0,0,"spinSetterSmall"),e.guiCanvas.addChild(e.spinSetter),e.spinSetter.anchor=new Point(.5,.5),e.spinSetter.inputEnabled=!0,e.spinSetter.ignoreChildInput=!0,e.cueBallSpot=new Phaser.Sprite(game,0,0,"cueBallSpot"),e.spinSetter.addChild(e.cueBallSpot),e.cueBallSpot.anchor=new Point(.5,.5),e.spinSetterZoom=new Phaser.Sprite(game,0,0,"spinSetterZoom"),e.guiCanvas.addChild(e.spinSetterZoom),e.spinSetterZoom.anchor=new Point(.5,.5),e.spinSetterZoom.inputEnabled=!0,e.spinSetterZoom.ignoreChildInput=!0,e.cueBallSpotZoom=new Phaser.Sprite(game,0,0,"cueBallSpotZoom"),e.spinSetterZoom.addChild(e.cueBallSpotZoom),e.cueBallSpotZoom.anchor=new Point(.5,.5),e.spinSetterZoom.visible=!1,e.rackSolids=new Phaser.Group(game,e.guiCanvas,"rackSolids"),e.rackBGSolids=new Phaser.Sprite(game,0,0,"rackBG"),e.rackSolids.addChild(e.rackBGSolids),e.rackBGSolids.x=1,e.rackBGSolids.y=0,e.rackBGSolids.anchor=new Point(.5,1),e.rackSolidsArray=new Array,e.rackSpotNumberArray=new Array;for(var i=0;i<7;i++)e.rackSolidsArray[i]=new Phaser.Sprite(game,0,0,"guiSolids",i),e.rackSolids.addChild(e.rackSolidsArray[i]),e.rackSolidsArray[i].x=50*i-200,e.rackSolidsArray[i].y=7,e.rackSolidsArray[i].anchor=new Point(0,1),e.rackSolidsArray[i].visible=!1,e.rackSpotNumberArray[i+1]=e.rackSolidsArray[i];e.rackSolids8ball=new Phaser.Sprite(game,0,0,"8ball"),e.rackSolids.addChild(e.rackSolids8ball),e.rackSolids8ball.x=-185,e.rackSolids8ball.y=-11,e.rackSolids8ball.anchor=new Point(0,1),e.rackSolids8ball.visible=!1,e.rackStripes=new Phaser.Group(game,e.guiCanvas,"rackStripes"),e.rackBGStripes=new Phaser.Sprite(game,0,0,"rackBG"),e.rackStripes.addChild(e.rackBGStripes),e.rackBGStripes.x=1,e.rackBGStripes.y=0,e.rackBGStripes.anchor=new Point(.5,1),e.rackStripesArray=new Array;for(i=0;i<7;i++){e.rackStripesArray[i]=new Phaser.Sprite(game,0,0,"guiStripes",i),e.rackStripes.addChild(e.rackStripesArray[i]),e.rackStripesArray[i].x=50*i-200,e.rackStripesArray[i].y=7,e.rackStripesArray[i].anchor=new Point(0,1),e.rackStripesArray[i].visible=!1,e.rackSpotNumberArray[i+9]=e.rackStripesArray[i]}if(e.rackStripes8ball=new Phaser.Sprite(game,0,0,"8ball"),e.rackStripes.addChild(e.rackStripes8ball),e.rackStripes8ball.x=-185,e.rackStripes8ball.y=-11,e.rackStripes8ball.anchor=new Point(0,1),e.rackStripes8ball.visible=!1,e.turnArrow1=new Phaser.Sprite(game,0,0,"turnArrow"),e.guiCanvas.addChild(e.turnArrow1),e.turnArrow1.anchor=new Point(.5,1),e.turnArrow1.scale=new Point(.5,.5),e.turnArrow2=new Phaser.Sprite(game,0,0,"turnArrow"),e.guiCanvas.addChild(e.turnArrow2),e.turnArrow2.anchor=new Point(.5,1),e.turnArrow2.scale=new Point(-.5,.5),e.humanIcon=new Phaser.Sprite(game,0,0,"humanIcon"),2==projectInfo.mode){(l=new Phaser.BitmapText(game,124,-(e.humanIcon.height-204),"font7","1",80)).anchor=new Phaser.Point(.5,.5),l.tint=0,e.humanIcon.addChild(l)}if(e.guiCanvas.addChild(e.humanIcon),e.humanIcon.anchor=new Point(0,1),e.humanIcon.scale=new Point(.5,.5),1==projectInfo.mode)e.aiIcon=new Phaser.Sprite(game,0,0,"aiIcon");else{e.aiIcon=new Phaser.Sprite(game,0,0,"humanIcon"),(c=new Phaser.BitmapText(game,124,-(e.humanIcon.height-81),"font7","2",80)).anchor=new Phaser.Point(.5,.5),c.tint=0,e.aiIcon.addChild(c)}e.guiCanvas.addChild(e.aiIcon),e.aiIcon.anchor=new Point(1,1),e.aiIcon.scale=new Point(.5,.5),e.guiPanel1=new Phaser.Sprite(game,0,0,"guiPanel1"),e.guiBaseCanvas.addChild(e.guiPanel1),e.guiPanel1.anchor.x=1,e.guiPanel1.anchor.y=1,e.guiPanel2=new Phaser.Sprite(game,0,0,"guiPanel1"),e.guiBaseCanvas.addChild(e.guiPanel2),e.guiPanel2.anchor.x=.5,e.guiPanel2.anchor.y=1,e.guiPanel3=new Phaser.Sprite(game,0,0,"guiPanel1"),e.guiBaseCanvas.addChild(e.guiPanel3),e.guiPanel3.anchor.x=0,e.guiPanel3.anchor.y=1,e.timerText=new Phaser.BitmapText(game,0,0,"font7","0:00",56),e.guiCanvas.addChild(e.timerText),e.timerText.anchor.x=.5,e.timerText.anchor.y=1,window.gi=e,e.scoreText=new Phaser.BitmapText(game,0,0,"font7",projectInfo.score,56),e.guiCanvas.addChild(e.scoreText),e.scoreText.anchor.x=.5,e.scoreText.anchor.y=1,e.multiplierText=new Phaser.BitmapText(game,0,0,"font7","x"+e.multiplier,56),e.guiCanvas.addChild(e.multiplierText),e.multiplierText.anchor.x=.5,e.multiplierText.anchor.y=1,2==projectInfo.mode&&(e.timerText.visible=!1,e.scoreText.visible=!1,e.multiplierText.visible=!1);e.menuButton=new Phaser.Button(game,0,0,"menuButton",n,this,1,0,1),e.menuButton.scale=new Phaser.Point(.5,.5),e.guiCanvas.addChild(e.menuButton),e.menuButton.anchor=new Phaser.Point(.5,0),game.device.touch&&(e.powerBar=new Phaser.Group(game,e.guiCanvas,"powerBar"),e.powerBarBG=new Phaser.Sprite(game,0,0,"powerBarBG"),e.powerBarBG.anchor=new Point(.5,.5),e.powerBar.addChild(e.powerBarBG),e.powerBarBase=new Phaser.Sprite(game,0,-13,"powerBarBase"),e.powerBarBase.anchor=new Point(.5,.5),e.powerBar.addChild(e.powerBarBase),e.powerBarMask=game.add.graphics(e.powerBar.x,e.powerBar.y),e.powerBarBase.mask=e.powerBarMask,e.powerBarTop=new Phaser.Sprite(game,0,-13,"powerBarTop"),e.powerBarTop.anchor=new Point(.5,.5),e.powerBar.addChild(e.powerBarTop),e.powerBarCue=new Phaser.Sprite(game,250,13,"cue"),e.powerBar.addChild(e.powerBarCue),e.powerBarCue.anchor=new Point(1,.5),e.powerBarCueMask=game.add.graphics(e.powerBar.x,e.powerBar.y),e.powerBarCue.mask=e.powerBarCueMask);e.gameOverPanel=new Phaser.Group(game,e.guiCanvas,"gameOverPanel"),e.gameOverPanel.anchor=new Point(.5,.5),e.gameOverPanel.visible=!1,e.gameOverPanelBG=new Phaser.Sprite(game,0,0,"panel3"),e.gameOverPanelBG.anchor=new Point(.5,.5),e.gameOverPanel.addChild(e.gameOverPanelBG),e.gameOverWindow=new Phaser.Sprite(game,-180,-201,"guiPanel2"),e.gameOverPanel.addChild(e.gameOverWindow),e.aiWin=new Phaser.Sprite(game,0,0,"aiWin"),e.aiWin.scale=new Phaser.Point(.5,.5),e.aiWin.anchor=new Phaser.Point(.6,.6),e.gameOverPanel.addChild(e.aiWin),e.aiWin.visible=!1,e.playerWin=new Phaser.Sprite(game,0,0,"playerWin"),e.playerWin.scale=new Phaser.Point(.5,.5),e.playerWin.anchor=new Phaser.Point(0,0),e.gameOverPanel.addChild(e.playerWin),e.playerWin.visible=!1,e.GOscoreIcon=new Phaser.Sprite(game,-78,-180,"score"),e.GOscoreIcon.anchor=new Phaser.Point(.5,.1),e.GOscoreIcon.scale=new Phaser.Point(.45,.45),e.gameOverPanel.addChild(e.GOscoreIcon),e.GOhighScoreIcon=new Phaser.Sprite(game,270,-256,"highScore"),e.GOhighScoreIcon.anchor=new Phaser.Point(.5,.25),e.GOhighScoreIcon.scale=new Phaser.Point(.5,.5),e.gameOverPanel.addChild(e.GOhighScoreIcon),e.GOaiLevel=new Phaser.Sprite(game,70,-5,"aiLevel"),e.GOaiLevel.anchor=new Phaser.Point(.5,.5),e.GOaiLevel.scale=new Phaser.Point(.8,.8),e.gameOverPanel.addChild(e.GOaiLevel),e.GOclockIcon=new Phaser.Sprite(game,-180,-5,"clockIcon"),e.GOclockIcon.anchor=new Phaser.Point(.5,.5),e.GOclockIcon.scale=new Phaser.Point(.55,.55),e.gameOverPanel.addChild(e.GOclockIcon);let s={x:-140,y:-120};var l;e.p1Icon=new Phaser.Sprite(game,s.x,s.y,"humanIcon"),e.p1Icon.anchor=new Phaser.Point(.5,.5),e.p1Icon.scale=new Phaser.Point(.5,.5),e.gameOverPanel.addChild(e.p1Icon),(l=new Phaser.BitmapText(game,-4,81,"font7","1",80)).anchor=new Phaser.Point(.5,.5),l.tint=0,e.p1Icon.addChild(l),(u=new Phaser.Sprite(game,-128,-128,"rosette")).anchor=new Phaser.Point(.5,.5),u.scale=new Phaser.Point(1,1),e.p1Icon.addChild(u),e.p1Icon.rosette=u,e.p1Icon.visible=!1;let p={x:140,y:-120};var c,u;e.p2Icon=new Phaser.Sprite(game,p.x,p.y,"humanIcon"),e.p2Icon.anchor=new Phaser.Point(.5,.5),e.p2Icon.scale=new Phaser.Point(.5,.5),e.gameOverPanel.addChild(e.p2Icon),(c=new Phaser.BitmapText(game,-4,81,"font7","2",80)).anchor=new Phaser.Point(.5,.5),c.tint=0,e.p2Icon.addChild(c),(u=new Phaser.Sprite(game,-128,-128,"rosette")).anchor=new Phaser.Point(.5,.5),u.scale=new Phaser.Point(1,1),e.p2Icon.addChild(u),e.p2Icon.rosette=u,e.p2Icon.visible=!1,e.gameOverPanel.text1=new Phaser.BitmapText(game,0,-180,"font7","xxx",56),e.gameOverPanel.text2=new Phaser.BitmapText(game,0,-209,"font7","xxx",56),e.gameOverPanel.text3=new Phaser.BitmapText(game,-110,-28,"font7","xxx",56),e.gameOverPanel.text4=new Phaser.BitmapText(game,135,-28,"font7","xxx",56),e.gameOverPanel.addChild(e.gameOverPanel.text1),e.gameOverPanel.addChild(e.gameOverPanel.text2),e.gameOverPanel.addChild(e.gameOverPanel.text3),e.gameOverPanel.addChild(e.gameOverPanel.text4);e.quitButton2=new Phaser.Button(game,90,170,"quitButton",r,this,1,0,1),e.quitButton2.anchor=new Phaser.Point(.5,.5),e.quitButton2.scale=new Phaser.Point(.5,.5),e.gameOverPanel.addChild(e.quitButton2),e.replayButton=new Phaser.Button(game,-90,170,"replayButton",o,this,1,0,1),e.replayButton.anchor=new Phaser.Point(.5,.5),e.replayButton.scale=new Phaser.Point(.5,.5),e.gameOverPanel.addChild(e.replayButton),e.quitButton2.input.enabled=!1,e.replayButton.input.enabled=!1,e.popUpPanel=new Phaser.Group(game,e.guiCanvas,"popUpPanel"),e.popUpPanel.anchor=new Point(.5,.5),e.popUpPanel.visible=!1,e.popUpPanelBG=new Phaser.Sprite(game,0,0,"panel2"),e.popUpPanelBG.scale=new Point(.75,1),e.popUpPanelBG.anchor=new Point(.5,.5),e.popUpPanel.addChild(e.popUpPanelBG),e.playButtonPU=new Phaser.Button(game,0,0,"playButton",a,this,1,0,1,0),e.playButtonPU.scale=new Point(.75,.75),e.popUpPanel.addChild(e.playButtonPU),e.playButtonPU.anchor=new Phaser.Point(.5,.5),e.quitButtonPU=new Phaser.Button(game,-57,0,"quitButton",r,this,1,0,1,0),e.popUpPanel.addChild(e.quitButtonPU),e.quitButtonPU.anchor=new Phaser.Point(.5,.5),e.quitButtonPU.scale=new Phaser.Point(.5,.5),e.replayButtonPU=new Phaser.Button(game,-170,0,"replayButton",o,this,1,0,1,0),e.popUpPanel.addChild(e.replayButtonPU),e.replayButtonPU.anchor=new Phaser.Point(.5,.5),e.replayButtonPU.scale=new Phaser.Point(.5,.5),e.muteButtonPU=new Phaser.Button(game,57,0,"muteButton",t,this,1,0,1,0),e.popUpPanel.addChild(e.muteButtonPU),e.muteButtonPU.anchor=new Phaser.Point(.5,.5),e.muteButtonPU.scale=new Phaser.Point(.5,.5),1==Sound.slave?e.muteButtonPU.setFrames(1,0,1,0):e.muteButtonPU.setFrames(3,2,3,2);e.quitButtonPU.input.enabled=!1,e.replayButtonPU.input.enabled=!1,e.playButtonPU.input.enabled=!1,e.muteButtonPU.input.enabled=!1,e.muteButtonPU.visible=!famobi.hasFeature("external_mute"),e.foulWindow=new Phaser.Group(game,e.guiCanvas,"foulWindow"),e.foulWindow.visible=!1,e.foulWindow.background=new Phaser.Sprite(game,0,0,"foulDisplay"),e.foulWindow.addChild(e.foulWindow.background),e.foulWindow.background.anchor=new Point(.5,.5),e.foulWindow.display1=new Phaser.Sprite(game,-172,-126,"illegalContacts"),e.foulWindow.addChild(e.foulWindow.display1);var h=new Phaser.Sprite(game,e.foulWindow.display1.width/2,e.foulWindow.display1.height/2+20,"cross");h.anchor=new Point(.5,0),e.foulWindow.display1.addChild(h),e.foulWindow.display2=new Phaser.Sprite(game,-172,30,"illegalContacts"),e.foulWindow.addChild(e.foulWindow.display2);var d=new Phaser.Sprite(game,e.foulWindow.display2.width/2,e.foulWindow.display2.height/2+20,"tick");d.anchor=new Point(.5,0),e.foulWindow.display2.addChild(d),e.foulWindow.display3=new Phaser.Sprite(game,0,0,"illegalShots"),e.foulWindow.addChild(e.foulWindow.display3),e.foulWindow.display3.anchor=new Point(.5,.5),e.foulWindow.display4=new Phaser.Sprite(game,0,0,"illegalBreak"),e.foulWindow.addChild(e.foulWindow.display4),e.foulWindow.display4.anchor=new Point(.5,.5),e.foulWindow.highlight=new Phaser.Sprite(game,-262,-237,"foulHighlight"),e.foulWindow.addChild(e.foulWindow.highlight),1==projectInfo.tutorial&&(game.device.touch,e.menuButton.visible=!1,e.turnArrow1.visible=!1,e.turnArrow2.visible=!1,e.humanIcon.visible=!1,e.aiIcon.visible=!1,e.rackSolids.visible=!1,e.rackStripes.visible=!1,e.spinSetter.visible=!1)}(),e.cueShadow=new Phaser.Sprite(game,0,0,"cueShadow"),e.cueCanvas.addChild(e.cueShadow),e.cueShadow.anchor=new Point(1,8/53),e.cue=new Phaser.Sprite(game,0,0,"cue"),e.cueCanvas.addChild(e.cue),e.cue.anchor=new Point(1,.5),function(){this.contactEvent=new Phaser.Signal,this.contactEvent.add(onContact,this)}(),function(){e.phys=new billiardPhysics(this.contactEvent,e.ballArray,e.lineArray,e.vertexArray,e.pocketArray,0),e.phys.friction=e.friction,e.phys.ballRadius=e.ballRadius,e.phys.pocketRadius=e.pocketRadius,e.phys.physScale=e.physScale,e.phys.minVelocity=e.minVelocity,e.phys.cushionRestitution=e.cushionRestitution,e.phys.ballRestitution=e.ballRestitution}(),renderScreen(),function(){e.levelText=new Phaser.BitmapText(game,0,-100,"font1",projectInfo.level,48),e.timerCanvas.addChild(e.levelText),e.levelText.anchor.x=.5,e.levelText.anchor.y=.5,e.levelText.alpha=.2,e.successIcon=new Phaser.Sprite(game,0,0,"success"),e.timerCanvas.addChild(e.successIcon),e.successIcon.visible=!1,e.successIcon.anchor=new Point(.5,.5),e.successIcon.alpha=.25,1==projectInfo.tutorial&&(e.levelText.visible=!1);e.levelText.visible=!1}(),1==projectInfo.tutorial&&(game.device.touch?(e.hand=new Phaser.Sprite(game,0,0,"hand"),e.tutCanvas.addChild(e.hand),e.hand.alpha=0):(e.mouseSprite=new Phaser.Sprite(game,0,0,"mouseSprite"),e.tutCanvas.addChild(e.mouseSprite),e.mouseSprite.alpha=0,e.mouseSprite.anchor=new Point(1,-.5))),"none"==projectInfo.lastBreaker?Math.random()<.5?(e.turn="p1",e.turnArrow1.frame=1,e.turnArrow2.frame=0):(e.turn="p2",e.turnArrow1.frame=0,e.turnArrow2.frame=1):"p2"==projectInfo.lastBreaker?(e.turn="p1",e.turnArrow1.frame=1,e.turnArrow2.frame=0):(e.turn="p2",e.turnArrow1.frame=0,e.turnArrow2.frame=1),function(){e.skipText=new Phaser.BitmapText(game,game.world.centerX,game.world.centerY+230,"font3","Click to skip",64),e.guiCanvas.addChild(e.skipText),e.skipText.anchor.x=.5,e.skipText.anchor.y=.5,e.skipText.alpha=.8,projectInfo.tutorial&&(e.skipText.visible=!0);e.skipText.visible=!1}(),function(){e.tutorialText=new Phaser.BitmapText(game,0,0,"font3","Tutorial",78),e.guiCanvas.addChild(e.tutorialText),e.tutorialText.anchor.x=.5,e.tutorialText.anchor.y=.5,e.tutorialText.alpha=.8,projectInfo.tutorial&&(e.tutorialText.visible=!0);e.tutorialText.visible=!1}(),resizeGame(),e.gameRunning=!0},playState.resumeGame=function(){var e=this.gameInfo;1!=e.gameOver&&(window.famobi_analytics.trackScreen("SCREEN_LEVEL"),e.gameRunning=!0),e.popUpPanel.visible=!1,e.quitButtonPU.input.enabled=!1,e.replayButtonPU.input.enabled=!1,e.playButtonPU.input.enabled=!1,e.muteButtonPU.input.enabled=!1},playState.shutdown=function(){var e=this.gameInfo;e.gameCanvas.destroy(),e.guiCanvas.destroy(),e.guiBaseCanvas.destroy(),e.cueBaseCanvas.destroy()};