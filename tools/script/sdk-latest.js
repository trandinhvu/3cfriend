function asset(t){t||(t="");var e=pm.Constants.PROTOCOL;return 0<e.length&&(t=t.replace("http://",e+"://")),t}function navigate(t){pm.Flags.useRouting?(history.replaceState(_.extend(history.state||{},{scrollTop:document.body.scrollTop||$(document).scrollTop()}),document.title,window.location),location.hostname&&(t=(t=t.replace(config.BASE_URL+"/","")).replace(location.hostname+"/","")),t=(t=(t=t.replace("http:","")).replace("https:","")).replace(/\/$/,""),Backbone.history.navigate(t,{trigger:!0})):"string"==typeof t&&($("html").addClass("loading-page"),window.location=t)}function refresh(){var t=window.location.href;t=(t=t.replace("http:","")).replace("https:",""),Backbone.history.fragment=null,Backbone.history.navigate(t.replace(config.BASE_URL+"/",""),{trigger:!0})}function debugState(){var t;for(t in pm.State)console.log("[State] "+t+" - ",pm.State[t])}function lineDistance(t,e){var n=0,i=0;return n=e.x-t.x,n*=n,i=e.y-t.y,i*=i,Math.sqrt(n+i)}function loading(){$("body").addClass("loading")}function notloading(){$("body").removeClass("loading")}function shuffle(t){var e,n,i;for(i=t.length;i;i-=1)e=Math.floor(Math.random()*i),n=t[i-1],t[i-1]=t[e],t[e]=n}function goesInto(t){for(var e=0;1<t;)t/=2,e++;return e}function divideInto(t,e){for(var n=0;n<e;n++)t/=2;return t}if(window.pm||(window.pm={}),Object.defineProperty(window,"a",{get:function(){return pm.app}}),Object.defineProperty(window,"p",{get:function(){return pm.State.page}}),Object.defineProperty(window,"s",{get:function(){return pm.State}}),Object.defineProperty(window,"u",{get:function(){return pm.State.currentUser()}}),Backbone.View.prototype.log=function(){var t=Array.prototype.slice.call(arguments,0,arguments.length);t.unshift("["+this.name+"]"),console.log.apply(console,t)},Backbone.View.prototype.warn=function(){var t=Array.prototype.slice.call(arguments,0,arguments.length);t.unshift("["+this.name+"]"),console.warn.apply(console,t)},Backbone.View.prototype.color=function(){var t=Array.prototype.slice.call(arguments,0,arguments.length);t.push(pm.Colors.VIEW),t.unshift("["+this.name+"] "),console.color.apply(console,t)},$.fn.scrollTo=function(t,o){var s=$.extend({y:0,x:0,duration:500,easing:"swing"},t);return this.each(function(){var t=$(this),e=($(s.scrollTarget),parseInt(s.y)),n=parseInt(s.x),i=parseInt(s.duration);t.animate({scrollTop:e,scrollLeft:n},i,s.easing,function(){"function"==typeof o&&o.call(this)})})},Date.prototype.stdTimezoneOffset=function(){var t=new Date(this.getFullYear(),0,1),e=new Date(this.getFullYear(),6,1);return Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()},console.color||(console.color=console.log),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.getElementsByTagName("head")[0].appendChild(msViewportStyle)}function Remote(r,t){var u=pm.State;r||(r="Model");var i=function(t,e,n){return e&&e[n]?_.isFunction(e[n])?e[n].call(t):e[n]:null},o={evaluate:/\{\#([\s\S]+?)\}/g,interpolate:/\{([\s\S]+?)\}/g,escape:/\{\%([\s\S]+?)\}/g};return Backbone[r].extend({_data:null,_options:null,_xhr:null,id:null,sort_order:1,autosaveHash:!1,hashIsStale:!1,disableCache:!1,urls:{},initialize:function(t,e){t||(t={}),e||(e={}),this._data||(this._data={}),this._options||(this._options={}),this.count=e.count,this.limit=e.limit,this.page=e.page,this.total=e.total,this._links=e._links,_.extend(this,e||{}),Backbone[r].prototype.initialize.call(this,t,e)},abort:function(){return this.isLoading()&&this._xhr.abort(),this},clearFetchData:function(){this._data={}},fetch:function(t,e){return this._data||(this._data={}),this._options||(this._options={}),t||(t={}),e||(e={}),"Collection"==r&&(t.page=t.page||this.page,t.limit=t.limit||this.limit),this._options=e,this._data=_.extend(this._data,t),e.data=this._data,this.abort(),this.trigger("will:fetch",this),this._xhr=Backbone[r].prototype.fetch.call(this,$.extend(e,{success:_.bind(this._onFetchSuccess,this),error:_.bind(this._onFetchError,this)}))},reset:function(){return this.abort(),Backbone[r].prototype.reset.apply(this,arguments)},destroy:function(t){return t||(t={}),t.error=this._error("destroy"),t.success=this._success("destroy"),Backbone[r].prototype.destroy.call(this,t)},beforeSave:function(){return this},save:function(t,e){return e||(e={}),e.error=this._error("save"),e.success=this._success("save"),$("body").addClass("loading-saving"),window.page&&window.page.onSaving(),this.beforeSave(),Backbone[r].prototype.save.call(this,t,e).always(function(){$("body").removeClass("loading-saving"),window.page&&window.page.onSavingComplete()})},sync:function(t,e,n){var i=_.clone(n),o=this.renderURL(t,i),s=n.success,a=n.error;return i.url||(i.url=o),i.beforeSend=function(t){var e=(u.get?u.get("token"):null)||pm.TOKEN;t.setRequestHeader("Authorization-API","Bearer "+e)},i.url=o.replace(/\/\/$/,"/"),0<i.url.indexOf("?")?i.url+="&amp;cb="+(pm.State.cbKey||Math.random()):i.url+="?cb="+(pm.State.cbKey||Math.random()),/dev./.test(location.hostname)&&(i.url=i.url.replace("https:","http:")),window.loading&&loading(),window.page&&window.page.loading(),i.success=function(t,e,n){window.notloading&&notloading(),window.page&&window.page.notloading();try{s(t,e,n)}catch(t){a(t)}},i.error=function(t,e,n){window.notloading&&notloading(),window.page&&window.page.notloading();try{a(t,e,n)}catch(t){a(t)}},Backbone[r].prototype.sync.call(e,t,e,i)},renderURL:function(t,e){var n=_.isEmpty(this.urls)?i(this,this,"url"):i(this,this.urls,t);return n=e.url||n,_.template(n,_.extend({},this,this.attributes,e),o)},getFetchData:function(t){return t?this._data[t]:this._data},hasLoaded:function(){return this._xhr&&"resolved"==this._xhr.state()},isLoading:function(){return this._xhr&&"resolved"!=this._xhr.state()},setFetchData:function(t){return t||(t={}),this._data||(this._data={}),this._data=_.extend(this._data,t),this},setResponse:function(t){this._response=t},_onFetchError:function(t,e){t.error=e.error,t.status=e.status,t.setResponse(e),"abort"==e.statusText?(t.trigger("abort",t),t.trigger("fetch:abort",t)):(t.trigger("error",t),t.trigger("fetch:error",t))},_onFetchSuccess:function(t,e){t.status=e.status,t.setResponse(e),e.data&&this.set(e.data,{silent:!0}),this.isCollection&&this.autosaveHash&&(console.info(this.url,":",this.getHash()),this.getHash()==u.collectionKeys[this.url]?this.hashIsStale=!0:(this.hashIsStale=!1,u.collectionKeys[this.url]=this.getHash())),t.trigger("success",t),t.trigger("fetch:success",t),t.trigger("fetch:data",t)},_success:function(n){var i=this;return function(t,e){i.status=e.status,i.setResponse(e),i.trigger("success",i,e),e.data?(i.set(e.data,{silent:!0}),i.trigger(n+":success",i,e),i.trigger(n+":data",i,e)):i._error(n)(i,e)}},_error:function(n){var i=this;return function(t,e){i.error=e.error,i.status=e.status,i.setResponse(e),"abort"==e.statusText?(i.trigger("abort",i,e),i.trigger(n+":abort",i,e)):(i.trigger("error",i,e),i.trigger(n+":error",i,e))}}}).extend(t||{})}!function(t){"use strict";var i=t.Colors;t.Tracking={index:0,category:null,queue:[],add:function(t,e,n){window._gaq?(console.color("[Tracking] "+t+" | "+e+" = "+n,i.TRACKING),_gaq.push(["_trackEvent",t,e,""+n])):console.warn("[Tracking] Tracking for _gaq could not be found."),window._paq?_paq.push(["trackEvent",t,e,""+n]):console.warn("[Tracking] Tracking for _paq could not be found.")}},_.extend(t.Tracking,Backbone.Events)}(window.pm||(window.pm={})),function(t){"use strict";window.config||(window.config={BASE_URL:location.host?"/":"",VERSION:0,API_URL:location.protocol+"//"+location.host+"/v1",SOCKET_URL:location.protocol+"//"+location.host+":5002",USERSOCKET_URL:location.protocol+"//"+location.host+":5003",IS_DEV:-1<location.host.toString().indexOf("dev."),IS_APP:!location.host,IS_MOBILE:navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i)});var e=navigator.userAgent,n=(window,window.top,-1<location.protocol.indexOf("file")),i=/dev./.test(location.hostname)||/localhost/.test(location.hostname)||n,o=/staging/.test(location.hostname),s=/ip(hone|od|ad)/i.test(e),a=/ip(hone)/i.test(e),r=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),u=/android/i.test(e),l=/android (?!.*(chrome|kindle))/i.test(e),c=/(chrome|CriOS)/i.test(e)&&!l,d=/windows/i.test(e),h=/msie[0-9.; ]+windows/i.test(e),g=/msie 9/i.test(e),m=/firefox/i.test(e),f=/safari/i.test(e)&&!/(chrome)/i.test(e)&&!/CriOS/i.test(e)&&!/Edg(iOS|A|e)/i.test(e)&&!/FxiOS/i.test(e),p=(/version\/5\..+ safari/i.test(e),Modernizr.touch&&!d),w=window.DEBUG_MODE,M=(e.match(/msie\s?([0-9]+)/i),e.match(/firefox\/([0-9]+)/i),e.match(/version\/([0-9]+)/i),!!window.history&&!!window.history.pushState),C=location.search.match(/v=([0-9\.]+)/),y=(t.Colors={ACTION:{background:"#c39",color:"#fff"},CAST:{background:"#64056d",color:"#d6a2f4"},CRITICAL:{background:"#f00",color:"#fff"},IMPORTANT:{background:"#dcf9dd",color:"#4e8e4e"},DEBUG:{background:"#0E5342",color:"#93d9c7"},DEFER:{background:"#f4f5cb",color:"#b4ba09"},LIST:{background:"#e2eea9",color:"#708410"},LOADING:{background:"#2099cd",color:"#fff"},PAGE:{background:"#206bb7",color:"#cedff0"},PROGRESS:{background:"#2099cd",color:"#ddd"},NAV:{background:"#9cf",color:"#333"},SEMI_CRITICAL:{background:"#f66",color:"#eee"},SOCIAL:{background:"#c3f1c2",color:"#357733"},SOUND:{background:"#003300",color:"#66FF66"},TRACKING:{background:"#c3f1c2",color:"#357733"},VIEW:{background:"#fce6bc",color:"#b5862b"},VIDEO:{background:"#00587e",color:"#fff"},VIDEO_ACTION:{background:"#00587e",color:"#ccc"},WARN:{background:"#f8ea6c",color:"#9c6d1b"},WHITE:16777215,BLUE:4310232,PINK:15505048,GREEN:9094709,RED:15410810,YELLOW:16567808},t.Constants={ANIMATION_DURATION:250,API_URL:config.API_URL||"//dev.api.chalkysticks.com/v1",SOCKET_URL:config.SOCKET_URL||"//localhost:5002",USERSOCKET_URL:config.USERSOCKET_URL||"//localhost:5003",IMAGE_HOST:"",REQUIRE_AUTH:!0,CONTENT_PER_PAGE:15,PROTOCOL:location.protocol.toString().replace(/[^htps]/g,"")||"https",VERSION:C&&C.length?C[1]:"1.0",BEACON_DURATION:180,BEACON_DISTANCE:5,FEED_DISTANCE:60,FEED_LIMIT:30,FEED_VENUE_ADD:100,FEED_VENUEMEDIA_ADD:105,FEED_VENUE_UPDATE:110,FEED_VENUE_CHECKIN:120,FEED_BEACON_ADD:200,FEED_TOURNAMENT_ADD:300,FEED_LEAGUE_ADD:400,FEED_CONTENT_ADD:500,FEED_CONTENT_PAD:510,FEED_CONTENT_NEWS:520,FEED_CONTENT_VIDEO:530,COLLECT_CASH_DELAY:6,TOURNAMENTS_DISTANCE:150,TOURNAMENTS_LIMIT:20,CONTENT_LIMIT:50,AUTH0_CLIENT_ID:"CWx5ChfgJsyT71d6dalpC49rK6MMcGEL",AUTH0_DOMAIN:"polymermallard.auth0.com",AUTH0_CALLBACK_URL:location.href,ONESIGNAL_ID:"72dc6874-8457-4554-92b5-fad100b0f9f1",GOOGLE_PROJECT_NUMBER:"355075788817"}),v=(t.Events={ADD:"add",ADD_NEXT:"add:next",ADD_PREVIOUS:"add:previous",ANIMATION_START:"animation:start",ANIMATION_END:"animation:end",BACK:"back",BLUR:"blur",CLICK:"click",COMPLETE:"complete",EMPTY:"empty",ERROR:"error",FOCUS:"focus",GEO:"geo",REVGEO:"geo:rev",GET_GEO:"geo:get",KEY_DOWN:"keydown",KEY_UP:"keyup",MENU_CLOSE:"menu:close",MENU_OPEN:"menu:open",MOUSE_DOWN:"mousedown",MOUSE_IDLE:"mouseidle",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_OVER:"mouseover",MOUSE_UP:"mouseup",NAV:"nav",NEXT:"next",PROGRESS:"progress",REMOVE:"remove",RESUME:"resume",RESIZE:"resize",ROUTE:"route",START:"start",STOP:"stop",SCROLL:"scroll",SUCCESS:"success",TAB_UNFOCUSED:"tab:unfocused",TAB_FOCUSED:"tab:focused",TRIGGER:"trigger",WINDOW_RESIZE:"window:resize",LOCK_AUTHENTICATED:"authenticated",FETCH_DATA:"fetch:data",FETCH_ERROR:"fetch:error",FETCH_SUCCESS:"fetch:success",PLAYER_PAUSE:"player:pause",PLAYER_PLAY:"player:play",PLAYER_STATE:"player:state",DECLARE_WINNER:"winner",SEND_TO_B_SIDE:"sendtobside",BEACON_START:"beacon:start",BEACON_STOP:"beacon:stop",LOGIN:"login",API_READY:"api:ready",FINISHED:"finished",HALF_WAY:"halfway",LAST_2_SECONDS:"last2seconds",LAST_5_SECONDS:"last5seconds",LAST_10_SECONDS:"last10seconds",LAST_PAGE:"page:last",LOADING:"loading",NEXT_EMPTY:"next:empty",PAUSE:"pause",PAUSED:"paused",PLAY:"play",PLAYPAUSE:"play-pause",PREVIOUS:"previous",PREVIOUS_EMPTY:"previous:empty",SEEK:"seek",UPDATE_USER:"user:update",UNLOAD:"unload",GAME_START:"game:start",GAME_END:"game:end",INNING_DATA:"inning:data",INNING_NEXT:"inning:next",INNING_PREVIOUS:"inning:previous"},t.Flags={isFile:n,isMobile:"m.chalkysticks.com"==location.hostname||r,isLocal:i,isStaging:o,isIOS:s,isiPhone:a,isAndroid:u,isAndroidBrowser:l,isWebkit:f||c,isChrome:c,isWindows:d,isIE:h,isIE9:g,isFirefox:m,isSafari:f,isTablet:p,isDebug:w,isMQStandard:620<=window.innerWidth&&window.innerWidth<=1700,isMQPhone:window.innerWidth<620,isMQLarge:1700<window.innerWidth,hasLocalStorage:!1,autoLogin:!1,useGoogle:!0,useRouting:M,useTransitions:!1,useSockets:!0});t.Keys={BACKSPACE:8,RETURN:13,SHIFT:16,SPACE:32,ALT:18,CMD:91,CTRL:17,DOWN:40,ESCAPE:27,LEFT:37,RIGHT:39,UP:38,NUM_0:48,NUM_1:49,NUM_2:50,NUM_3:51,NUM_4:52,NUM_5:53,NUM_6:54,NUM_7:55,NUM_8:56,NUM_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90},t.State={};v.hasLocalStorage=function(){var t=window.sessionStorage;try{return t.setItem("test","1"),t.removeItem("test"),!0}catch(t){return!1}}();var A=Date.now();function b(){window.config.IS_MOBILE&&document.body.classList.add("is-mobile"),0<location.href.indexOf("embedded=app")&&document.body.classList.add("embedded-app"),t.App?(window.app=new t.App,app.attachEvents(),app.render()):console.warn("[sdk-load] Could not find an instance of `App` on namespace.")}console.color=function(){var t,e=Array.prototype.slice.apply(arguments),n=e.pop()||{};t=Date.now()-A,A=Date.now(),e[0]="%c "+e[0]+" ",e=[e.join(" ")+" - "+t+"ms","background: "+n.background+"; color: "+n.color+";"],console.log.apply(console,e)},!v.isLocal&&!v.isStaging&&location.href.toString().indexOf("polymer")<0&&$.extend(console,{color:$.noop,debug:$.noop,error:$.noop,log:$.noop,dir:$.noop,dirxml:$.noop,table:$.noop,trace:$.noop,assert:$.noop,count:$.noop,markTimeline:$.noop,profile:$.noop,profileEnd:$.noop,time:$.noop,timeEnd:$.noop,timeStamp:$.noop,group:$.noop,groupCollapsed:$.noop,groupEnd:$.noop,clear:$.noop}),_.extend(t,Backbone.Events,{Browser:Modernizr,parent:window.top,$html:$("html"),$document:$(document),$window:$(window),$body:$(document.body),$main:$("main"),app:null,func:{},preventDefault:function(t){return t.preventDefault(),t.stopPropagation(),!1}}),void 0!==document.hidden?window.visibilitychange="visibilitychange":void 0!==document.mozHidden?window.visibilitychange="mozvisibilitychange":void 0!==document.msHidden?window.visibilitychange="msvisibilitychange":void 0!==document.webkitHidden&&(window.visibilitychange="webkitvisibilitychange"),t.executeDefer=function(t){for(var e in window.deferrable){if(t){window.deferrable["deferrable"+t].forEach(function(t){t()}),window.deferrable[t]=null,delete window.deferrable[t];break}window.deferrable[e].forEach(function(t){t()})}window.deferrable=null},_.templateSettings={interpolate:/\[\[(.+?)\]\]/g},v.isMobile?$("html").addClass("is-mobile"):$("html").addClass("is-desktop"),t.Flags.isIE?$("html").addClass("browser-ie"):$("html").addClass("browser-not-ie"),v.isIOS&&($("html").addClass("is-ios"),/OS 7/.test(navigator.userAgent)&&$("html").addClass("is-ios-7")),0<location.href.indexOf("embedded=app")&&document.body.classList.add("embedded-app"),$(document).ready(function(){$("body").addClass("version-"+y.VERSION.replace(/\./,"-"))}),setTimeout(function(){config.IS_APP&&!window.READY?(console.color("[Main] Waiting for device to be ready.",t.Colors.LOADING),document.addEventListener("deviceready",b,!1)):(console.color("[Main] Immediately loading application.",t.Colors.LOADING),$(document).ready(b))},1)}(window.pm||(window.pm={})),function(s){"use strict";s.Model_Base=Remote("Model",{isModel:!0,model_map:{},initialize:function(t){t||(t={}),this.set("id",t.ID||this.id),Backbone.Model.prototype.initialize.call(this,t)},set:function(t){var e=Backbone.Model.prototype.set.apply(this,arguments),o=this.attributes;return _.each(this.model_map,function(t,e){if(o[e]){var n=-1<t.indexOf("Collection")?o[e].data:o[e];if(this[e]instanceof s[t])this[e].set(n);else{var i=new s[t](n);this[e]=i}}},this),e}})}(window.pm||(window.pm={})),function(t){"use strict";var o=t.Colors,s=t.Events,e=t.State;t.Collection_Base=Remote("Collection",{_links:null,limit:10,page:1,page_max:0,total:0,isCollection:!0,next:function(t,e){var n,i=this;return null==t&&(t=this._data),null==e&&(e=this._options),this.lastPage?(console.color("[Collection] We cannot go any further.",o.CRITICAL),!1):(t.limit||(t.limit=this.limit||15),t.page=++this.page||++t.page||1,(n=this.fetch(t,e))&&n.then&&n.then(function(t,e,n){(!t||t&&!t.data||t&&t.data&&t.data.length<1||t&&t.data&&t.data.length<i._data.limit)&&(i.lastPage=!0,console.color("[Collection] We just fetched the last page.",o.CRITICAL),i.trigger(s.LAST_PAGE))}),n)},comparator:function(t){return 0<this.sort_order?t.get(this.sort_key):-t.get(this.sort_key)},sortByField:function(t){return this.sort_key=t,this.sort(),this.sort_key="id",this},isEmpty:function(){return!this.hasLoaded()||this.hasLoaded()&&0==this.length},isNewData:function(){return e.collectionKeys[this.url]!=this.getHash()},getHash:function(){var t=JSON.stringify(this.toJSON());return CryptoJS.MD5(t).toString()},saveHash:function(){e.collectionKeys[this.url]=this.getHash(),e.save()}})}(window.pm||(window.pm={})),function(e){"use strict";var n=e.Constants,t=e.Events,i=(e.Flags,e.State);e.View_Base=Backbone.View.extend({_animate_state:t.ANIMATION_END,enableTabs:!1,rendered:!1,tabs:null,templateData:null,views:null,initialize:function(t){t||(t={}),_.bindAll(this,"_onAnimateIn","_onAnimateOut"),_.extend(this,t),this.templateData={},this.views=new e.View_Views(this),this.$v=_.bind(function(t){return this.views.get(t)},this),this.parent=t.parent||window,this.templateName&&(this.template=$("#"+this.templateName).html(),this.twig=twig({data:this.template})),this.template&&(this.isPage||this.autoRender)&&this.$el.html(this.twig.render()),this.enableTabs&&(this.tabs=new e.View_UI_Tabs({el:this.$el}))},attachEvents:function(){this.detachEvents(),this.delegateEvents(this.events),this.views.execAll("attachEvents")},detachEvents:function(){this.views.execAll("detachEvents"),this.undelegateEvents()},convertToTouch:function(){_.each(this.events,function(t,e){-1<e.indexOf("click")&&(delete this.events[e],e=e.replace("click","tap"),this.events[e]=t)},this)},animateInStart:function(){},animateToggle:function(t){return this._animate_state===n.ANIMATE_IN?this.animateOut(null,t):this._animate_state===n.ANIMATE_OUT&&this.animateIn(t),this},animateIn:function(t){return t||(t={}),t.duration=isNaN(t.duration)?n.ANIMATION_DURATION:t.duration,this.isHidden()&&this.animateOut({duration:0}),this._onAnimateStart(),this.$el.stop().delay(t.delay||0).slideDown(t.duration,_.bind(this._onAnimateIn,this)),this},animateOut:function(t){return t||(t={}),t.duration=isNaN(t.duration)?n.ANIMATION_DURATION:t.duration,this._onAnimateStart(),this.$el.stop().delay(t.delay||0).slideUp(t.duration,_.bind(this._onAnimateOut,this)),this},animateToggle:function(t){return this._animate_state===n.ANIMATE_IN?this.animateOut(t):this._animate_state===n.ANIMATE_OUT&&this.animateIn(t),this},hide:function(){return this.$el.hide(),this},show:function(){return this.$el.show(),this},fadeIn:function(){return this.$el.removeClass("hide").hide().fadeIn(),this},template:function(t){return e.func.template(this.templateName,t||{})},decode:function(t,n,i){n=n||"name",i=i||"val",_.each(t,function(t,e){this.$el.find("["+n+"="+e+"]")[i](t)},this)},encode:function(e,n){var i={};return e=e||"name",n=n||"val",this.$el.find("*["+e+"]").each(function(t){i[$(this).prop(e)]=$(this)[n]()}),i},reattachEvents:function(){this.detachEvents(),this.attachEvents()},reset:function(){return this},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setState:function(t){this.$el.addClass("state-"+t)},unsetState:function(t){this.$el.removeClass("state-"+t)},unsetAllStates:function(t){this.$el[0].className=this.$el[0].className.replace(/\bstate\-.*?\b/g,"")},render:function(t){return Backbone.View.prototype.render.call(this),this.rendered=!0,t||(t={}),config||(config={}),this.model&&(t.model=this.model),this.collection&&(t.collection=this.collection),t.baseURL=location.protocol+"//"+location.hostname,t.isLoggedIn=i.isLoggedIn?i.isLoggedIn():null,t.user=window.user||config.USER||{},t.userId=t.user.id||0,t.version=config.VERSION,t.timezoneAbbr=(new Date).getTimezone(),t.state=i,t.todaysDate=moment().format("YYYY-MM-DD"),t=_.extend(t,this.templateData),this.twig&&this.$el.html(this.twig.render(t)),this.tabs&&this.tabs.render(),this},hasRendered:function(){return!!this.rendered},isBottomVisible:function(){var t=this.$el.position();if(t&&t.top)return this.$el.outerHeight()+this.$el.position().top<window.innerHeight+$(window).scrollTop();console.log(this.$el," cannot get position")},isHidden:function(){return!!this.$el.hasClass("hide")},isLocked:function(){return!0===this.locked},_setAnimateStart:function(){this._animate_state=n.ANIMATE_TRANSITION},_setAnimateIn:function(){this._animate_state=n.ANIMATE_IN},_setAnimateOut:function(){this._animate_state=n.ANIMATE_OUT},_onAnimateStart:function(){this._setAnimateStart(),this.trigger(t.ANIMATING),this.show()},_onAnimateIn:function(){this._setAnimateIn(),this.$el.addClass("state-animated-in"),this.trigger(t.ANIMATE_IN)},_onAnimateOut:function(){this._setAnimateOut(),this.$el.removeClass("state-animated-in"),this.trigger(t.ANIMATE_OUT)}})}(window.pm||(window.pm={})),function(e){"use strict";e.Events,e.Colors;var t=e.Flags;e.Page_Base=e.View_Base.extend({urlObjects:null,urlPattern:"",initialize:function(t){t||(t={}),_.bindAll(this,"onClickMenuToggle","onData","onClickReadMore"),this.urlObjects=location.pathname.match(this.urlPattern),e.View_Base.prototype.initialize.call(this,t)},attachEvents:function(){e.View_Base.prototype.attachEvents.call(this),$(".action-menu").on("click",this.onClickMenuToggle),$(".action-back-page a").on("click",this.onClickBack),$("body").on("click",".action-read-more",this.onClickReadMore)},detachEvents:function(){e.View_Base.prototype.detachEvents.call(this),$(".action-menu").off("click",this.onClickMenuToggle),$(".action-back-page a").off("click",this.onClickBack),$("body").off("click",".action-read-more",this.onClickReadMore)},animateIn:function(){return this.$el.addClass("state-animated-in"),t.useTransitions?this.$el.fadeIn():this.$el.show()},animateOut:function(){return this.$el.removeClass("state-animated-in"),t.useTransitions?this.$el.fadeOut():this.$el.hide()},render:function(){e.View_Base.prototype.render.apply(this,arguments),this.setPageName(this.name),1<=$("footer.requires-login").length?($("body").addClass("has-footer-via-login"),$(".scrollable").addClass("scrollable-with-footer").removeClass("scrollable")):1<=$("footer").length&&($("body").addClass("has-footer"),$(".scrollable").addClass("scrollable-with-footer").removeClass("scrollable"))},setPageName:function(t){t=t||this.name,e.$body[0].className=e.$body[0].className.toString().replace(/pg-[^ ]+/g,""),e.$body.addClass("rendered"),e.$body.addClass("pg-"+this.name)},loading:function(){},notloading:function(){},onClickBack:function(t){t.preventDefault(),window.history.back()},onClickMenuToggle:function(t){t.preventDefault(),$("body").toggleClass("menu-open")},onClickReadMore:function(t){t.preventDefault(),$(t.currentTarget).next(".read-more").toggle()},onData:function(t,e,n){this.render()},onAnimatedIn:function(){history.state&&history.state.scrollTop&&this.color("Setting scroll position to "+history.state.scrollTop)},onAnimatedOut:function(){},onSaving:function(){},onSavingComplete:function(){}})}(window.pm||(window.pm={})),function(t){"use strict";t.Events,t.Flags,t.State,t.Constants;t.Hook_Base=_.extend({},Backbone.Events,{fire:function(){}}),t.Hook_Base.extend=_.extend,t.Hook_Base.singleton=null,t.Hook_Base.getInstance=function(){return t.Hook_Base.singleton||new t.Hook_Base}}(window.pm||(window.pm={})),function(t){"use strict";t.Constants,t.Events;t.View_Views=function(t){this._parent=t,this._byId={},this._views=[]},t.View_Views.prototype={length:0,_parent:!1,_byId:!1,_views:!1,add:function(t,e){if(e||(e="model"in t?t.model.cid:t.cid),!t)throw"add requires a view";if(this.has(e))throw e+" is already a sub-view";return t._viewKey=e,this._views.push(t),(this._byId[e]=t).parent||(t.parent=this._parent),this.length++,this},has:function(t){return this._getModelCidOrName(t)in this._byId},_get:function(t){var e=this._getModelCidOrName(t);if(this.has(e))return this._byId[e]},get:function(t){var e,n;return-1<t.indexOf(" ")?(t=(n=t.split(" "))[0],e=this._get(t),n.shift(),e.views.get(n.join(" "))):this._get(t)},at:function(t){return this._views[t]},remove:function(t){return t||(t=[]),t=_(t).isString()?[t]:t,_(t).each(function(t){if(this.has(t)){this._byId[t].remove();var e=_.indexOf(this._views,this._byId[t]);this._byId[t]=void 0,delete this._byId[t],this._views.splice(e,1),this.length--}},this),this},reset:function(t){t||(t={});var n=t.except||[];n=_(n).isString()?[n]:n;var i=[];return _.each(this._byId,function(t,e){-1===_.indexOf(n,e)&&i.push(e)}),this.remove(i)},debug:function(){var e=[];this.each(function(t){e.push({cid:t.cid,key:t._viewKey,name:t.name})}),console.table(e)},invoke:function(){return _.invoke.apply(_,[this._views].concat(_.toArray(arguments)))},indexOf:function(){return _.indexOf.apply(_,[this._views].concat(_.toArray(arguments)))},indexOfElement:function(t){for(var e in this._views)if(this.at(e).$el.get(0)==t)return e},each:function(){return _.each.apply(_,[this._views].concat(_.toArray(arguments)))},every:function(){return _.all.apply(_,[this._views].concat(_.toArray(arguments)))},execAll:function(n,i){i||(i=[]);var o=_.toArray(arguments);o.shift(),_.each(this._views,function(t,e){_(i).contains(t._viewName)||t[n].apply(t,o)},this)},_getModelCidOrName:function(t){return _(t).isObject()?t.cid:t}}}(window.pm||(window.pm={})),function(t){"use strict";var a=pm.Constants,r=(pm.Colors,pm.Events,pm.State);window.Utility_Form={submit:function(t,e){e||(e={});var n=new FormData(t.get(0)),i=t.attr("action"),o=a.API_URL+i,s=t.attr("method").trim();t.find(".dimmer").addClass("active"),$("body").addClass("loading-saving"),e.process&&(n=t.serialize()),e.data&&e.data(n),$.ajax({type:e.type||s,url:o,data:n,dataType:"json",crossDomain:!0,encode:e.process||!1,processData:e.process||!1,contentType:!e.isFile&&"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:function(t){t.setRequestHeader("Authorization-API","Bearer "+r.token)}}).done(e.success||$.noop).fail(e.error||$.noop).always(function(){t.find(".dimmer").removeClass("active"),$("body").removeClass("loading-saving")})}}}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Colors,t.Events,t.Flags,t.Settings,t.State;window.URL=window.Utility_URL={bustCache:!0,go:function(t){t=config.BASE_URL.length?t.replace(config.BASE_URL+"/",""):t,Backbone.history.navigate(t,{trigger:!0})},base:function(t){return t||(t=""),this.filter(config.BASE_URL+t)},api:function(t){return t||(t=""),this.filter(e.API_URL+t)},filter:function(t){return this.bustCache&&(t=this.filter_bust(t)),t},filter_bust:function(t){return t+="?random="+Math.random()}}}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Accomplishments=t.Model_Base.extend({defaults:{icon_url:null,banner_url:null,description:null},url:e.API_URL+"/accomplishments/{id}/",getIconURL:function(){return asset(this.get("icon_url"))},getBannerURL:function(){return asset(this.get("banner_url"))},getDescription:function(){return asset(this.get("description"))}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Ads=t.Model_Base.extend({image:null,company:null,url:e.API_URL+"/ads/{id}/",getCaption:function(){return this.get("caption")},getURL:function(){return this.get("url")},getImage:function(){return this.get("image")},getCompany:function(){return this.get("company")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants,n=(t.Flags,t.State);t.Model_Beacons=t.Model_Base.extend({lat:null,lon:null,distance:null,time_ago:null,status:null,keepalive:null,created_at:null,updated_at:null,user:null,url:e.API_URL+"/beacons/{id}/",model_map:{user:"Model_Users"},stopBeacon:function(){return $.ajax({url:e.API_URL+"/beacons/",type:"DELETE",headers:{"Authorization-API":"Bearer "+n.get("token")}}).done(function(){n.updateCacheKey()})},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getDistance:function(t){return t?parseFloat(this.get("distance")).toFixed(t):this.get("distance")},getTimeAgo:function(){return this.get("time_ago")},getKeepAlive:function(){return!!this.get("keepalive")},getLatitude:function(){return this.get("lat")},getLongitude:function(){return this.get("lon")},getStatus:function(){return this.get("status")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Brackets=t.Model_Base.extend({tournamententry_id:null,side:"a",order:null,round:null,table:null,created_at:null,updated_at:null,url:e.API_URL+"/brackets/{id}",getRound:function(){return this.get("round")},getTable:function(){return this.get("table")},getTournamentEntryID:function(){return parseFloat(this.get("tournamententry_id"))},getOrder:function(){return this.get("order")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Content=t.Model_Base.extend({title:null,content:null,media_type:null,media_url:null,created_at:null,updated_at:null,url:e.API_URL+"/content/{id}/",getContent:function(){return this.get("content")},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getEmbeddable:function(){return this.hasImage()?"<img src='"+this.getMediaURL()+"'>":this.hasVideo()?"<iframe width='560' height='315' frameborder='0' allowfullscreen src='"+this.getMediaURL()+"'></iframe>":void 0},getMediaURL:function(){return asset(this.get("media_url"))},getPreview:function(t){t||(t=50);var e=this.getContent();return(e=e.replace(/(<([^>]+)>)/gi," ")).substr(0,t)+"..."},getTitle:function(){return this.get("title")},getType:function(){return this.get("media_type")},getThumbnailURL:function(t){var e=this.getMediaURL();if(t){var n,i=this.getContent().match(/< *img[^>]*src *= *["\']?([^"\']*)/),o=["/stat"];if(i&&1<i.length){for(var s in n=i[1],o)if(0<n.indexOf(o[s]))return this.getThumbnailURL(!1);return n}}return this.get("thumbnail_url")?this.get("thumbnail_url"):this.hasVideo()&&e.indexOf("youtube.com")?asset("http://img.youtube.com/vi/"+e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/embed\/|\/)([^\s&]+)/)[1]+"/0.jpg"):e},getURL:function(t){var e=t||(this.hasImage()?"news":"videos");return 0<this.getThumbnailURL().indexOf("pad.chalkysticks.com/image/")&&(e="poolpad"),"/"+e+"/"+this.id},hasImage:function(){return"image"==this.get("media_type")},hasVideo:function(){return"video"==this.get("media_type")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Feed=t.Model_Base.extend({html_message:null,plain_message:null,type:null,lat:null,lon:null,created_at:null,updated_at:null,url:e.API_URL+"/feed/{id}/",getDistance:function(t){var e=t?parseFloat(this.get("distance")).toFixed(t):this.get("distance");return isNaN(e)?"Unknown":e},getDistanceFormatted:function(t){var e=t?parseFloat(this.get("distance")).toFixed(t):this.get("distance");return isNaN(e)?this.getCity()+", "+this.getState():e+" mi"},getLatitude:function(){return this.get("lat")},getLongitude:function(){return this.get("lon")},getMessage:function(){return this.get("html_message")},getType:function(){return this.get("type")},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getCreatedAtFromNow:function(){return moment(moment.utc(this.get("created_at")).toDate()).fromNow()}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Games=t.Model_Base.extend({is_win:null,is_loss:null,created_at:null,updated_at:null,ended_at:null,score:null,url:e.API_URL+"/games/{id}/",model_map:{score:"Model_Score"},initialize:function(){t.Model_Base.prototype.initialize.apply(this,arguments),null==this.score&&(this.score=new t.Model_Score)},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getEndedAt:function(t,e){return t?moment(moment.utc(this.get("ended_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("ended_at")},isWin:function(){return this.get("is_win")},isLoss:function(){return this.get("is_loss")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Help=t.Model_Base.extend({content:null,revision:null,url:e.API_URL+"/help/app/",getContent:function(){return this.get("content")},getRevision:function(){return this.get("revision")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Innings=t.Model_Base.extend({defaults:{top_potted:0,top_foul:0,top_safety:0,bottom_potted:0,bottom_foul:0,bottom_safety:0},url:e.API_URL+"/innings/{id}/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Matches=t.Model_Base.extend({is_win:null,is_loss:null,created_at:null,updated_at:null,ended_at:null,games:null,url:e.API_URL+"/matches/{id}/",model_map:{games:"Collection_Games"},initialize:function(){t.Model_Base.prototype.initialize.apply(this,arguments),null==this.games&&(this.games=new t.Collection_Games)},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getEndedAt:function(t,e){return t?moment(moment.utc(this.get("ended_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("ended_at")},isWin:function(){return this.get("is_win")},isLoss:function(){return this.get("is_loss")}})}(window.pm||(window.pm={})),function(t){"use strict";t.Constants,t.Flags;t.Model_Media=t.Model_Base.extend({type:null,url:null,created_at:null,updated_at:null,getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getURL:function(){return asset(this.get("url"))},isImage:function(){return"image"==this.get("type")},isVideo:function(){return"video"==this.get("type")}})}(window.pm||(window.pm={})),function(t){"use strict";t.Constants,t.Flags;var e=t.State;t.Model_Messages=t.Model_Base.extend({user_id:null,body:null,created_at:null,updated_at:null,getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getCreatedAtShortened:function(t,e){new Date;var n="M/DD";this.getCreatedAt(t,n);return n=e||"<[time]>h:mm A</[time]> <[strong class='date']>M/D</[strong]>",t?moment(moment.utc(this.get("created_at")).toDate()).format(n=n||"MMMM Do, YYYY"):this.get("created_at")},isMe:function(){return e.user&&e.user.id==this.getUserID()},isToday:function(){return 0==moment(moment.utc(this.get("created_at")).toDate()).diff(moment(),"days")},getUserID:function(){return this.get("user_id")},getBody:function(t){var e=this.get("body");return t&&!isNaN(t)?e.substring(0,t)+(e.length>t-3?"...":""):e}})}(window.pm||(window.pm={})),function(t){"use strict";t.Constants,t.Flags;t.Model_Meta=t.Model_Base.extend({group:null,key:null,value:null,getGroup:function(){return this.get("group")},getKey:function(){return this.get("key")},getValue:function(){return this.get("value")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Nights=t.Model_Base.extend({created_at:null,updated_at:null,matches:null,url:e.API_URL+"/nights/{id}/",model_map:{matches:"Collection_Matches"},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")}})}(window.pm||(window.pm={})),function(t){"use strict";t.Constants,t.Flags;t.Model_Participants=t.Model_Base.extend({last_read:null,created_at:null,updated_at:null,user:null,model_map:{user:"Model_Users"},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getLastRead:function(t,e){return t?moment(moment.utc(this.get("last_read")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("last_read")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Payments=t.Model_Base.extend({type:null,type_id:null,cc_name:null,cc_digits:null,cc_cvc:null,cc_month:null,cc_year:null,notes:null,created_at:null,updated_at:null,paymentOption:null,url:e.API_URL+"/payments/{id}/",getType:function(){return this.get("type")},getTypeID:function(){return this.get("type_id")},getDigits:function(){return this.get("cc_digits")},getName:function(){return this.get("cc_name")},getCVC:function(){return this.get("cc_cvc")},getMonth:function(){return this.get("cc_month")},getYear:function(){return this.get("cc_year")},getNotes:function(){return this.get("notes")},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_PlayerProfiles=t.Model_Base.extend({url:e.API_URL+"/player-profiles/{id}/",getFact:function(){var t=this.get("facts");return t.length?t[0]:""}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Rulebooks=t.Model_Base.extend({content:null,title:null,type:null,url:e.API_URL+"/rulebooks/{id}/",getContent:function(){return this.get("content")},getTitle:function(){return this.get("title")},getType:function(){return this.get("type")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Scores=t.Model_Base.extend({defaults:{match_type:null,player1_id:null,player1_name:"Player 1",player1_rank:null,player2_id:null,player2_name:"Player 2",player2_rank:null,team1_id:null,team1_name:null,team2_id:null,team2_name:null},url:e.API_URL+"/scores/{id}/",innings:null,model_map:{innings:"Collection_Innings"},initialize:function(){t.Model_Base.prototype.initialize.apply(this,arguments),null==this.innings&&(this.innings=new t.Collection_Innings,this.innings.add(new t.Model_Innings))},getPlayer1Name:function(){return this.get("player1_name").split(" ",2).join("<br>")},getPlayer2Name:function(){return this.get("player2_name").split(" ",2).join("<br>")},determineWinner:function(){var t=this.innings.last();return 0==t.get("bottom_foul")&&0<t.get("bottom_potted")?2:1},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_Teams=t.Model_Base.extend({name:null,league_type:null,league_id:null,rank:null,wins:null,losses:null,created_at:null,updated_at:null,owner:null,url:e.API_URL+"/teams/{id}/",model_map:{owner:"Model_Users"},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getName:function(){return this.get("name")},getLeagueType:function(){return this.get("league_type")},getLeagueID:function(){return this.get("league_id")},getRank:function(){return this.get("rank")},getWins:function(){return this.get("wins")},getLosses:function(){return this.get("losses")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants,n=(t.Flags,t.State);t.Model_Threads=t.Model_Base.extend({created_at:null,updated_at:null,messages:null,participants:null,url:e.API_URL+"/messages/{id}/",model_map:{messages:"Collection_Messages",participants:"Collection_Participants"},getToUser:function(){var e;return this.participants.each(function(t){n.user&&t.user.id==n.user.id||(e=t.user)}),e},getNotMe:function(){var e;return this.participants.each(function(t){window.user&&t.user.id==user.id||(e=t.user)}),e},getLatestMessage:function(){return this.messages.last()},getURL:function(){return"/messages/"+this.id},isRead:function(){var e=!1;return this.participants.each(function(t){n.user&&t.user.id==n.user.id&&(e=1<t.get("last_read").length&&0<=moment(t.get("last_read")).diff(this.get("updated_at"),"minutes"))},this),e}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_TournamentsEntries=t.Model_Base.extend({user_id:null,price_paid:null,name:null,rank:null,status:null,created_at:null,updated_at:null,user:null,url:e.API_URL+"/tournaments-entries/{id}/",model_map:{user:"Model_Users"},getName:function(){return this.user?this.user.getName():this.get("name")},getRank:function(){return this.get("rank")||"Not set"},getPricePaid:function(){return this.get("price_paid")||0},getThumbnailURL:function(){return this.user?this.user.getThumbnailURL():"/image/backgrounds/no-photos-user.jpg"},getURL:function(){return this.user?this.user.getURL():null},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_TournamentsPayments=t.Model_Base.extend({tournament_id:null,name:null,description:null,price:null,created_at:null,updated_at:null,url:e.API_URL+"/tournaments-payments/{id}/",getName:function(){return this.get("name")},getDescription:function(){return this.get("description")},getPrice:function(){return this.get("price")},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")}})}(window.pm||(window.pm={})),function(e){"use strict";var i=e.Constants,o=(e.Flags,e.State);e.Model_Tournaments=e.Model_Base.extend({name:null,bracket_type:null,game_type:null,flyer_type:null,accepts_payments:null,description:null,read_more:null,max_players:null,roster_count:null,begins_at:null,ends_at:null,created_at:null,updated_at:null,brackets:null,roster:null,payments:null,owner:null,host:null,venue:null,url:i.API_URL+"/tournaments/{id}/",model_map:{brackets:"Collection_Brackets",host:"Model_Users",payments:"Collection_TournamentsPayments",roster:"Collection_TournamentsEntries",owner:"Model_Users",venue:"Model_Venues"},attend:function(){return new e.Model_TournamentsEntries({tournament_id:this.id}).save().done(function(){o.updateCacheKey()})},leave:function(){for(var t in this.roster.models)if(this.roster.models[t].user.id==user.id)return this.roster.models[t].destroy().done(function(){o.updateCacheKey()});return!0},clearBracket:function(){var n=this,t=o.get("token")||e.TOKEN;return $.ajax({url:i.API_URL+"/brackets?tournament_id="+this.id,method:"DELETE",cache:!1,headers:{"Authorization-API":"Bearer "+t},success:function(t,e){n.brackets&&n.brackets.reset()}})},acceptsPayments:function(){return 1==this.get("accept_payments")},getBeginsAt:function(t,e){return t?moment(this.get("begins_at")).subtract((new Date).getTimezoneOffset(),"minutes").format(e=e||"MMMM Do, YYYY h:mma"):this.get("begins_at")},getBeginsAtFromNow:function(){return moment(this.get("begins_at")).subtract((new Date).getTimezoneOffset(),"minutes").fromNow()},getCreatedAt:function(t,e){return t?moment(this.get("created_at")).subtract((new Date).getTimezoneOffset(),"minutes").format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getEndsAt:function(t,e){return t?moment(this.get("ends_at")).subtract((new Date).getTimezoneOffset(),"minutes").format(e=e||"MMMM Do, YYYY h:mma"):this.get("ends_at")},getEndsAtFromNow:function(){return moment(this.get("ends_at")).subtract((new Date).getTimezoneOffset(),"minutes").fromNow()},getName:function(){return this.get("name")},getHost:function(){return this.host||this.owner},getDescription:function(t){var e=(this.get("description")||"").toString();return t?e:e.replace(/\n/g,"<br>")},getReadMore:function(){return this.get("read_more")},getEntryFee:function(){return this.get("entry_fee")},getLastsFor:function(){var t=new Date(this.get("begins_at")),e=(new Date(this.get("ends_at")||t).getTime()-t.getTime())/1e3;return Math.max(1,Math.round(e/60/60/24)+1)},getMaxPlayers:function(){return parseFloat(this.get("max_players"))},getRowCount:function(t){return t?Math.max(1,2*this.getRowCount(!1)-2):Math.floor(Math.log(this.getMaxPlayers())/Math.log(2))},getBracketType:function(){return this.get("bracket_type")},getFlyerType:function(){return this.get("flyer_type")},getGameType:function(){return this.get("game_type")},getBracketTypeCaption:function(){switch(this.get("bracket_type")){case"single":return"Single Elimination";case"double":return"Double Elimination"}},getURL:function(){return"/tournaments/"+this.id},isAttending:function(t){if(this.roster)for(var e in t=t||window.user,this.roster.models)if(this.roster.models[e].user&&this.roster.models[e].user.id==t.id)return!0;return!1},isSingleElimination:function(){return"single"==this.getBracketType()},isDoubleElimination:function(){return"double"==this.getBracketType()},isMultiDay:function(){return 1<this.getLastsFor()},hasStarted:function(){return new Date(this.get("begins_at")).getTime()<Date.now()},hasEnded:function(){return new Date(this.get("ends_at")).getTime()+864e5<Date.now()},getRowsPerRound:function(t,e){var n=1;return"a"==(e=(e||"a").toLowerCase())?n=this.getMaxPlayers()/Math.pow(2,t):"b"==e&&(n=this.getMaxPlayers()/Math.pow(2,Math.ceil(t/2)+1)),n},getWinningEntryFrom:function(t){var e;return"a"==t?e=this.getRowCount(!1)+1:"b"==t&&(e=this.getRowCount(!0)+1),this.brackets.findWhere({round:e,side:t})},getWinnerFrom:function(t){var e;return(e=this.getWinningEntryFrom(t))?this.roster.findWhere({id:e.get("tournamententry_id")}):(console.warn("Entry not found | side("+t+")"),null)},findBracketEntry:function(t,e,n){return n||(n="a"),n=n.toLowerCase(),this.brackets.findWhere({round:t,side:n,order:e})},existsOnB:function(t,e){var n=Math.max(1,2*t-2),i=t;if(this.findBracketEntry(i,e,"a")){var o=this.getRosterByBracketPosition(i,e,"a");if(o)return this.brackets.findWhere({tournamententry_id:o.id,side:"b",round:n});console.warn("Does not exist on B",t,e)}return!1},getRosterByBracketPosition:function(t,e,n){var i;return n||(n="a"),n=n.toLowerCase(),(i=this.findBracketEntry(t,e,n))?this.roster.findWhere({id:i.get("tournamententry_id")}):(console.warn("Entry not found | round("+t+") order("+e+") side("+n+")"),null)},isEntryAWinner:function(t,e,n){var i;return n||(n="a"),n=n.toLowerCase(),!(!this.findBracketEntry(t,e,n)||!(i=this.getRosterByBracketPosition(t,e,n)))&&this.brackets.isWinner(i,t,n)},isEntryALoser:function(t,e,n){var i;return n||(n="a"),n=n.toLowerCase(),e+=e%2==0?-1:1,!(!this.findBracketEntry(t,e,n)||!(i=this.getRosterByBracketPosition(t,e,n)))&&this.brackets.isWinner(i,t,n)}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags,t.State;t.Model_Transactions=t.Model_Base.extend({type:null,type_id:null,status:null,amount:null,currency:null,user_id:null,user_email:null,notes:null,created_at:null,updated_at:null,url:e.API_URL+"/transactions/{id}",getAmount:function(){return this.get("amount")},getAmountFormatted:function(){return"$"+this.getAmount()/100},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getCreatedAtFromNow:function(){return moment(moment.utc(this.get("created_at")).toDate()).fromNow()},getCurrency:function(){return this.get("currency")},getEmail:function(){return this.get("user_email")},getNotes:function(){return this.get("notes")}})}(window.pm||(window.pm={})),function(s){"use strict";var a=s.Constants,n=s.Events,r=(s.Flags,s.State);s.Model_Users=s.Model_Base.extend({name:null,slug:null,email:null,phone:null,lat:null,lon:null,status:null,wallet_balance:null,last_collection:null,is_social:null,is_facebook:null,is_twitter:null,created_at:null,updated_at:null,ospn_user_id:null,ospn_push_token:null,accomplishments:null,checkins:null,games:null,media:null,meta:null,transactions:null,url:a.API_URL+"/users/{id}/",model_map:{accomplishments:"Collection_Accomplishments",checkins:"Collection_Venues",games:"Collection_Meta",media:"Collection_Media",meta:"Collection_Meta",friends:"Collection_UsersFriends",prizes:"Collection_UsersPrizes",wallet:"Collection_UsersWallet"},initialize:function(){_.bindAll(this,"onUserFetched","onUserLogin"),s.Model_Base.prototype.initialize.apply(this,arguments),this.transactions=new s.Collection_Transactions({user_id:this.id})},socialLogin:function(t){return $.post(a.API_URL+"/auth/social/",t,this.onUserLogin)},login:function(t){return $.post(a.API_URL+"/auth/login/",{email:t.email,password:t.password},this.onUserLogin)},forgotPassword:function(t){return $.post(a.API_URL+"/auth/forgot-password/",{email:t.email},function(t,e){"success"==e&&t.token&&r.updateCacheKey()})},resetPassword:function(t){return $.post(a.API_URL+"/auth/forgot-password/"+t.token,{password:t.password},function(t,e){"success"==e&&t.token&&r.updateCacheKey()})},logout:function(){r.unset("token"),r.unset("user"),r.unset("beacon"),r.unset("messageCount"),window.user=null,s.trigger(n.LOGOUT)},me:function(){var n=this,t=r.get("token")||s.TOKEN;return $.ajax({url:a.API_URL+"/me/",cache:!1,headers:{"Authorization-API":"Bearer "+t},success:function(t,e){n.set(t)}})},sendFriendRequest:function(t){var n=this,e=r.get("token")||s.TOKEN;return $.ajax({method:"POST",data:{user_id:t.id},url:a.API_URL+"/me/friends",cache:!1,headers:{"Authorization-API":"Bearer "+e},success:function(t,e){console.log("We should update friends list now.",t),n.getFriends().add(t),r.updateCacheKey(),r.save()},error:function(t,e){console.warn("We are likely already friends with this user.",t)}})},removeFriend:function(i){var o=this,t=r.get("token")||s.TOKEN;return $.ajax({method:"DELETE",url:a.API_URL+"/me/friends/"+i.id,cache:!1,headers:{"Authorization-API":"Bearer "+t},success:function(t,e){var n;n=o.getFriends().find(function(t){return t.friend.id==i.id}),console.log("We should remove from list now...",n),o.getFriends().remove(n),r.updateCacheKey(),r.save()},error:function(t,e){console.warn("We cannot remove a friend that doesn't exist.",t)}})},fetchMessagesCount:function(){return $.ajax({url:a.API_URL+"/messages/count/",cache:!1,headers:{"Authorization-API":"Bearer "+r.get("token")},success:function(t,e){"success"==e&&(r.set("messageCount",t.message_count),r.set("friendRequests",t.friend_requests)),r.updateCacheKey()}})},getFriends:function(){return!!this.id&&(this.friends&&!this.friends.user_id&&(this.friends=null),this.friends=this.friends||new s.Collection_UsersFriends(null,{user_id:this.id}))},getFriendRequests:function(){return!!this.id&&(this.friendRequests&&!this.friendRequests.user_id&&(this.friendRequests=null),this.friendRequests=this.friendRequests||new s.Collection_UsersFriendRequests(null,{user_id:this.id}))},getLastCollectionTime:function(){var t=this.get("last_collection");return t&&t.id?moment(t.created_at):moment().utc()},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at").date).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getBeaconsSent:function(){return this.getMetaValue("beacons_sent")||0},getBio:function(){return this.getMetaValue("brief_bio")},getLastLocation:function(){return this.getMetaValue("last_location")||""},getName:function(){return this.get("name")},getSlug:function(){return this.get("slug")},getEmail:function(){return this.get("email")},getPhone:function(){return this.get("phone")},getLatitude:function(){return this.get("lat")},getLongitude:function(){return this.get("lon")},getHometown:function(){return this.getMetaValue("hometown")},getStatus:function(){return this.get("status")},getTalentLevel:function(){return this.getMetaValue("talent_level")},getTalentLevelWords:function(t){switch(this.getMetaValue("talent_level")){case"1":return"Inexperienced";case"2":return"Learning";case"3":return"Pretty Good";case"4":return"Solid";case"5":return"Well Rounded";case"6":return"Damn!";case"7":return"Intermediate";case"8":return"Advanced";case"9":return"Semi-Pro";case"10":return"Professional";case"11":return"SL 2";case"12":return"SL 3";case"13":return"SL 4";case"14":return"SL 5";case"15":return"SL 6";case"16":return"SL 7";case"17":return"SL 8"}return"Not Set"},getThumbnailURL:function(){return this.media&&this.media.length?this.media.at(0).getURL():config.BASE_URL+"image/social/avatar.default.jpg"},getWalletBalance:function(){return parseFloat(this.get("wallet_balance"))||0},getWalletBalanceFormatted:function(){return(this.getWalletBalance()+"").replace(/./g,function(t,e,n){return e&&"."!==t&&(n.length-e)%3==0?","+t:t})},getWalletBalanceForDisplay:function(){var t=this.getWalletBalance(),e=(Math.abs(t)+"").replace(/./g,function(t,e,n){return e&&"."!==t&&(n.length-e)%3==0?","+t:t});return 0<=t?"$"+e:"- $"+e},getWalletColor:function(){return 0<=this.getWalletBalance()?"color-theme-green":"color-theme-red"},getURL:function(){return"/users/"+this.id},isMe:function(){return window.user&&window.user.id==this.id},isCheckedIn:function(){return!1},isSocial:function(){return this.get("is_social")},isFacebook:function(){return this.get("is_facebook")},isTwitter:function(){return this.get("is_twitter")},canAutoCheckin:function(){return 1==this.getMetaValue("autocheckin")},hasGameValue:function(t){return!!this.games&&!!(t=this.games.findWhere({key:t}))},getMetaValue:function(t){return!!this.meta&&((t=this.meta.findWhere({key:t}))?t.get("value"):"")},isFriendsWith:function(e){return this.friends.find(function(t){return t.friend.id==e.id})},onUserFetched:function(t,e){"success"==e&&t.token&&(r.set("user",t.user),this.set(t.user),r.updateCacheKey(),r.save())},onUserLogin:function(t,e){"success"==e&&t.token&&(r.set("token",t.token),r.set("user",t.user),this.set(t.user),r.updateCacheKey(),r.save(),s.trigger(n.LOGIN,t))}}),s.Model_Users.loadUser=function(){return new s.Model_Users(r.get("user"))}}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants,n=(t.Flags,t.State);t.Model_UsersFriendRequests=t.Model_Base.extend({user_id:null,friend_id:null,status:null,created_at:null,updated_at:null,url:e.API_URL+"/me/friend_requests/{id}",model_map:{friend:"Model_Users"},approve:function(){return this.save({status:"approved"}).done(function(){n.updateCacheKey(),window.app&&app.setupUserData()})},deny:function(){return this.destroy().done(function(){n.updateCacheKey(),window.app&&app.setupUserData()})},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getStatus:function(){return this.get("status")},getUpdatedAt:function(t,e){return t?moment(moment.utc(this.get("updated_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("updated_at")}})}(window.pm||(window.pm={})),function(t){"use strict";var n=t.Constants;t.Flags;t.Model_UsersFriends=t.Model_Base.extend({user_id:null,friend_id:null,status:null,created_at:null,updated_at:null,url:function(t){var e=window.user;return e&&e.id==t?n.API_URL+"/me/friends":n.API_URL+"/users/{user_id}/friends"},model_map:{friend:"Model_Users"},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getStatus:function(){return this.get("status")},getUpdatedAt:function(t,e){return t?moment(moment.utc(this.get("updated_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("updated_at")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_UsersPaymentAccount=t.Model_Base.extend({user_id:null,first_name:null,last_name:null,account_holder_type:null,email:null,country:null,currency:null,dob_month:null,dob_day:null,dob_year:null,created_at:null,updated_at:null,url:e.API_URL+"/users/{user_id}/payment-account",getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getFirstName:function(){return this.get("first_name")},getLastName:function(){return this.get("last_name")},getAccountHolderType:function(){return this.get("account_holder_type")},getEmail:function(){return this.get("email")},getCountry:function(){return this.get("country")},getCurrency:function(){return this.get("currency")},getDOBMonth:function(){return this.get("dob_month")},getDOBDay:function(){return this.get("dob_day")},getDOBYear:function(){return this.get("dob_year")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_UsersPrizes=t.Model_Base.extend({user_id:null,prize_id:null,value:null,created_at:null,updated_at:null,url:e.API_URL+"/users/{user_id}/prizes",getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getPrizeID:function(){return this.get("prize_id")},getValue:function(){return this.get("value")},getUpdatedAt:function(t,e){return t?moment(moment.utc(this.get("updated_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("updated_at")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_UsersWallet=t.Model_Base.extend({user_id:null,source:null,source_id:null,transaction:null,created_at:null,updated_at:null,url:e.API_URL+"/users/{user_id}/wallet",model_map:{challenger:"Model_Users"},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getIconType:function(){switch(this.getSource()){case"ad_play":return"ion-ios-videocam";case"game":return"ion-ribbon-b";case"beacon":return"ion-location";case"checkin":return"ion-checkmark";case"tournament":return"ion-trophy";case"submission":return"ion-upload";case"revision":return"ion-edit";case"collection":return"ion-social-usd";case"photo":return"ion-camera"}},getSource:function(){return this.get("source")},getSourceID:function(){return this.get("source_id")},getTransaction:function(){return this.get("transaction")},getTransactionForDisplay:function(){var t=this.getTransaction(),e=(Math.abs(t)+"").replace(/./g,function(t,e,n){return e&&"."!==t&&(n.length-e)%3==0?","+t:t});return 0<t?"+ $"+e:"- $"+e},getColor:function(){return 0<this.getTransaction()?"color-theme-green":"color-theme-red"},getTransactionType:function(){switch(this.getSource()){case"ad_play":return"Advertisement";case"game":return"Game: "+this.challenger.getName();case"beacon":return"Beacon";case"checkin":return"Checkin";case"tournament":return"Tournament";case"submission":return"Submission";case"revision":return"Revision";case"collection":return"Collected Cash";case"photo":return"Uploaded Photo"}},getUpdatedAt:function(t,e){return t?moment(moment.utc(this.get("updated_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("updated_at")}})}(window.pm||(window.pm={})),function(n){"use strict";var t=n.Constants,i=n.Events,o=(n.Flags,n.State);n.Model_Venues=n.Model_Base.extend({name:null,slug:null,type:null,address:null,phone:null,lat:null,lon:null,city:null,state:null,country:null,zip:null,description:null,notes:null,created_at:null,updated_at:null,checkins:null,details:null,media:null,meta:null,url:t.API_URL+"/venues/{id}/",model_map:{checkins:"Collection_VenuesCheckins",details:"Collection_Meta",media:"Collection_Media",meta:"Collection_Meta"},checkin:function(){return $.ajax({url:t.API_URL+"/venues/"+this.id+"/checkin/",method:"POST",headers:{"Authorization-API":"Bearer "+o.get("token")},success:function(t,e){o.updateCacheKey(),n.trigger(i.UPDATE_USER),router.reload()}})},getAddress:function(t){return this.get("address")},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")},getCheckinAt:function(t,e){return t?moment(moment.utc(this.get("checkin_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("checkin_at")},getCity:function(){return this.get("city")},getCreatedAtFromNow:function(t,e){return console.log(this.get("created_at")),moment(moment.utc(this.get("created_at")).toDate()).fromNow()},getCheckinAtFromNow:function(){return moment(moment.utc(this.get("checkin_at")).toDate()).fromNow()},getCountry:function(){return this.get("country")},getDescription:function(){return this.get("description")},getDistance:function(t){var e=t?parseFloat(this.get("distance")).toFixed(t):this.get("distance");return isNaN(e)?"Unknown":e},getDistanceFormatted:function(t){var e=t?parseFloat(this.get("distance")).toFixed(t):this.get("distance");return isNaN(e)?this.getCity()+", "+this.getState():e+" mi"},getLatitude:function(){return this.get("lat")},getLongitude:function(){return this.get("lon")},getName:function(){return this.get("name")},getNotes:function(){return this.get("notes")},getPhone:function(){return this.get("phone")},getDisplayPhone:function(){return(this.getPhone()||"").toString().replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")},getState:function(){return this.get("state")},getType:function(){return this.get("type")},getTitle:function(){return this.getName()},getThumbnailURL:function(){return this.media&&this.media.length?this.media.at(0).getURL().replace("-lg.jpg","-thumb.jpg").replace("-lg.png","-thumb.png"):config.BASE_URL+"image/backgrounds/no-photos-venue.jpg"},getWebsite:function(){return this.getMetaValue("website")},getURL:function(){return"/places/"+this.id},getZip:function(){return this.get("zip")},isCheckedIn:function(t){if(this.checkins)for(var e in t=t||window.user,this.checkins.models)if(this.checkins.models[e].user.id==t.id)return!0;return!1},getDistanceFrom:function(t){var e,n,i=parseFloat(this.get("lat")),o=parseFloat(this.get("lon")),s=parseFloat(t.latitude);return e=s-i,e*=e,n=parseFloat(t.longitude)-o,n*=n,console.log(i,s,e,n),Math.sqrt(e+n)},getMetaValue:function(t){return!!this.meta&&((t=this.meta.findWhere({key:t}))?t.get("value"):"")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Flags;t.Model_VenuesCheckins=t.Model_Base.extend({venue_id:null,user_id:null,created_at:null,updated_at:null,user:null,url:e.API_URL+"/venues/{id}/checkin",model_map:{user:"Model_Users"},getCreatedAt:function(t,e){return t?moment(moment.utc(this.get("created_at")).toDate()).format(e=e||"MMMM Do, YYYY"):this.get("created_at")}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Accomplishments=t.Collection_Base.extend({model:t.Model_Accomplishments,url:e.API_URL+"/accomplishments/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Ads=t.Collection_Base.extend({model:t.Model_Ads,url:e.API_URL+"/ads/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Beacons=t.Collection_Base.extend({model:t.Model_Beacons,url:e.API_URL+"/beacons/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.State;t.Collection_Brackets=t.Collection_Base.extend({model:t.Model_Brackets,url:e.API_URL+"/brackets",sort_key:"id",getByRound:function(e){return this.filter(function(t){return t.getRound()==e})},getMaxRounds:function(){var e=0;return this.each(function(t){e=Math.max(e,t.getRound())},this),e},hasEntry:function(e){return this.find(function(t){return t.get("tournamententry_id")==e.id})},isWinner:function(e,n,i){return i||(i="a"),this.find(function(t){return parseFloat(t.get("tournamententry_id"))==e.id&&parseFloat(t.get("round"))==n+1&&t.get("side")==i})},removeEntry:function(t){var e=_.last(this.where(t));e&&e.destroy(),e&&this.remove(e)}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Content=t.Collection_Base.extend({model:t.Model_Content,url:e.API_URL+"/content/",sort_key:"created_at",comparator:function(t){return-t.get(this.sort_key)}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Feed=t.Collection_Base.extend({model:t.Model_Feed,url:e.API_URL+"/feed/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Games=t.Collection_Base.extend({model:t.Model_Games,url:e.API_URL+"/games/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Innings=t.Collection_Base.extend({model:t.Model_Innings,url:e.API_URL+"/innings/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Matches=t.Collection_Base.extend({model:t.Model_Matches,url:e.API_URL+"/matches/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Media=t.Collection_Base.extend({model:t.Model_Media,url:e.API_URL+"/#/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Messages=t.Collection_Base.extend({model:t.Model_Messages,url:e.API_URL+"/#/",sort_key:"updated_at"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Meta=t.Collection_Base.extend({model:t.Model_Meta,url:e.API_URL+"/#/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Nights=t.Collection_Base.extend({model:t.Model_Nights,url:e.API_URL+"/nights/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Participants=t.Collection_Base.extend({model:t.Model_Participants,url:e.API_URL+"/#/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Rulebooks=t.Collection_Base.extend({model:t.Model_Rulebooks,url:e.API_URL+"/rulebooks/",getByType:function(e){return this.filter(function(t){return t.getType()==e})}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Teams=t.Collection_Base.extend({model:t.Model_Teams,url:e.API_URL+"/teams/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Threads=t.Collection_Base.extend({model:t.Model_Threads,url:e.API_URL+"/messages/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_TournamentsEntries=t.Collection_Base.extend({model:t.Model_TournamentsEntries,url:e.API_URL+"/tournaments-entries/",findByBracket:function(t){return this.findWhere({id:t.getTournamentEntryID()})}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_TournamentsPayments=t.Collection_Base.extend({model:t.Model_TournamentsPayments,url:e.API_URL+"/tournaments-payments/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Tournaments=t.Collection_Base.extend({model:t.Model_Tournaments,url:e.API_URL+"/tournaments/"})}(window.pm||(window.pm={})),function(e){"use strict";var t=e.Constants;e.Collection_Transactions=e.Collection_Base.extend({model:e.Model_Transactions,url:t.API_URL+"/users/{user_id}/transactions",user_id:null,initialize:function(t){t||(t={}),e.Collection_Base.prototype.initialize.call(this,t),this.user_id=t.user_id}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Users=t.Collection_Base.extend({model:t.Model_Users,url:e.API_URL+"/users/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_UsersFriendRequests=t.Collection_Base.extend({model:t.Model_UsersFriendRequests,url:e.API_URL+"/me/friend_requests"})}(window.pm||(window.pm={})),function(t){"use strict";var n=t.Constants;t.Collection_UsersFriends=t.Collection_Base.extend({model:t.Model_UsersFriends,url:function(t){var e=window.user;return e&&e.id==this.user_id?n.API_URL+"/me/friends":n.API_URL+"/users/"+this.user_id+"/friends"}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_UsersPrizes=t.Collection_Base.extend({model:t.Model_UsersPrizes,url:e.API_URL+"/users/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_UsersWallet=t.Collection_Base.extend({model:t.Model_UsersWallet,url:e.API_URL+"/users/",sort_key:"created_at",sort_order:-1})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_Venues=t.Collection_Base.extend({model:t.Model_Venues,url:e.API_URL+"/venues/",autosaveHash:!0,findClosestVenue:function(s){return this.min(function(t){var e,n,i=parseFloat(t.get("lat")),o=parseFloat(t.get("lon"));return e=parseFloat(s.latitude)-i,e*=e,n=parseFloat(s.longitude)-o,n*=n,Math.sqrt(e+n)})},findClosestVenueDistance:function(a){var r;return this.min(function(t){var e,n,i,o=parseFloat(t.get("lat")),s=parseFloat(t.get("lon"));return n=parseFloat(a.latitude)-o,n*=n,i=parseFloat(a.longitude)-s,i*=i,r=e=Math.sqrt(n+i),e}),r}})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants;t.Collection_VenuesCheckins=t.Collection_Base.extend({model:t.Model_VenuesCheckins,url:e.API_URL+"/venues/"})}(window.pm||(window.pm={})),function(t){"use strict";var e=t.Constants,i=t.Colors,n=t.Events,o=t.Flags;t.State=_.extend(t.State||{},{exclude:["payment"],autoSave:!0,startTime:Date.now(),cbKey:Date.now(),disableTransition:!1,scrollPositionY:0,windowWidth:0,windowHeight:0,mouse:{x:0,y:0,down:!1},isYoutubeReady:!1,youtubeCreated:!1,volume:50,savedVolume:50,muted:!1,isChatOpen:!0,video:{duration:0,time:0,elapsed:0},latitude:null,longitude:null,latitude_full:null,longitude_full:null,beacon:0,messageCount:0,friendRequests:0,page:null,payment:new t.Model_Payments,user:null,token:null,lastCollection:"0",collectionKeys:{},set:function(t,e){this.hasOwnProperty(t)&&(this[t]=e),this.autoSave&&this.save()},append:function(t,e){var n=this.get(t)||[];n.push(e),this.hasOwnProperty(t)&&(this[t]=n),this.autoSave&&this.save()},unset:function(t){this[t]=null,this.autoSave&&this.save()},get:function(t){return this[t]},has:function(t){return void 0!==this[t]},save:function(){if(!o.hasLocalStorage)return console.color("[State] LocalStorage unavailable, perhaps you're in private mode.",i.DEBUG);var t={},e=this;for(var n in e)if(this.hasOwnProperty(n)&&!_(this.exclude).contains(n)&&"function"!=typeof e[n]){if(null!=e[n]&&"object"==typeof e[n]&&e[n].cid){if(!e[n].attributes)continue;console.color("[State] Converting Backbone "+n+", "+e,i.DEBUG),e[n]=e[n].attributes}t[n]=e[n]}localStorage.setItem("state",JSON.stringify(t))},load:function(){if(!o.hasLocalStorage)return console.color("[State] LocalStorage unavailable, perhaps you're in private mode.",i.DEBUG);var t=localStorage.getItem("state")||"{}",e=JSON.parse(t);console.color("[State] Loading settings and users.",i.DEBUG),_.extend(this,e)},debug:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(t[e]={value:this[e]});return console.table(t),null},logout:function(){window.user&&window.user.logout(),this.unset("token"),this.unset("user"),this.unset("beacon"),this.unset("messageCount"),this.unset("friendRequests"),window.user=null},canCollectCash:function(){var t=(window.user?user.getLastCollectionTime():moment(this.get("lastCollection"))).diff(moment().utc().format("YYYY-MM-DD HH:mm:ss"))/1e3/60;return Math.round(t/60)<-1*e.COLLECT_CASH_DELAY},startBeacon:function(){this.set("beacon",Date.now()/1e3+e.BEACON_DURATION),t.State.updateCacheKey(),t.trigger(n.BEACON_START)},stopBeacon:function(){this.set("beacon",0),t.State.updateCacheKey(),t.trigger(n.BEACON_STOP)},hasToken:function(){return!this.get("token")||0<this.get("token").length},isBeaconActive:function(){return 0<this.get("beacon")&&Date.now()/1e3<this.get("beacon")},isLoggedIn:function(){return this.get("token")&&window.user&&0<window.user.id},updateCacheKey:function(){return console.log("CBK"+Date.now()),this.cbKey=Date.now()}}),t.State.load(),t.State.isYoutubeReady=!1,t.State.youtubeCreated=!1}(window.pm||(window.pm={}));