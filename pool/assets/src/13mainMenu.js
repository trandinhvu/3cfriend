var menuState={init:function(){if(window.famobi_analytics.trackScreen("SCREEN_HOME"),this.menuInfo=new Object,game.scale.setResizeCallback(this.onResize,this),null==window.famobi.localStorage.getItem("guideOn")){projectInfo.guideOn=1;try{window.famobi.localStorage.setItem("guideOn",1)}catch(t){}}else projectInfo.guideOn=window.famobi.localStorage.getItem("guideOn");if(null==window.famobi.localStorage.getItem("aiRating")){projectInfo.aiRating=2;try{window.famobi.localStorage.setItem("aiRating",2)}catch(t){}}else projectInfo.aiRating=window.famobi.localStorage.getItem("aiRating");if(null==window.famobi.localStorage.getItem("bestScore")){projectInfo.bestScore=0;try{window.famobi.localStorage.setItem("bestScore",0)}catch(t){projectInfo.alertSent}}else projectInfo.bestScore=window.famobi.localStorage.getItem("bestScore");if(null==window.famobi.localStorage.getItem("numGames")){projectInfo.numGames=0;try{window.famobi.localStorage.setItem("numGames",0)}catch(t){projectInfo.alertSent}}else projectInfo.numGames=window.famobi.localStorage.getItem("numGames");if(null==window.famobi.localStorage.getItem("bestTime")){projectInfo.bestTime=0;try{window.famobi.localStorage.setItem("bestTime",0)}catch(t){projectInfo.alertSent}}else projectInfo.bestTime=window.famobi.localStorage.getItem("bestTime")},onResize:function(t,e){this.resizeGame(t,e)},create:function(){var t=this.menuInfo;this.resizeGame=function(e,n){Math.min(fenster.innerWidth,document.documentElement.clientWidth);var a=Math.min(fenster.innerHeight,document.documentElement.clientHeight);"portrait"==window.famobi.getOrientation()?(game.scale.setGameSize(1080,1920),t.playButton.x=0,t.playButton.y=game.height/2*.4,t.playButton.anchor=new Phaser.Point(.5,0),t.playButton.scale=new Point(.75,.75),t.statsButton.x=-150,t.statsButton.y=game.height/2*.4,t.statsButton.anchor=new Point(1,0),t.statsButton.scale=new Point(.5,.5),t.helpButton.x=150,t.helpButton.y=game.height/2*.4,t.helpButton.anchor=new Point(0,0),t.helpButton.scale=new Point(.5,.5),t.settingsButton.x=game.width/2-100,t.settingsButton.y=-game.height/2+100,t.settingsButton.anchor=new Point(1,0),t.settingsButton.scale=new Point(.5,.5),t.settingsWindow.y=0,t.statsWindow.x=game.width/2+0,t.statsWindow.y=game.height/2,t.pVpButton.x=0,t.pVpButton.y=.07*game.height,t.pVAIButton.x=0,t.pVAIButton.y=.07*-game.height,t.famobiMoreGames.x=0,t.famobiMoreGames.y=game.height/2*.9,t.famobiMoreGames.anchor=new Point(.5,1),t.title.y=-game.height/2*.5):(game.scale.setGameSize(1920,1080),t.playButton.x=0,t.playButton.y=game.height/2*.9,t.playButton.anchor=new Phaser.Point(.5,1),t.playButton.scale=new Point(.75,.75),t.statsButton.x=-150,t.statsButton.y=game.height/2*.9,t.statsButton.anchor=new Point(1,1),t.statsButton.scale=new Point(.5,.5),t.settingsButton.x=game.width/2-100,t.settingsButton.y=-game.height/2+100,t.settingsButton.anchor=new Point(1,0),t.settingsButton.scale=new Point(.5,.5),t.helpButton.x=150,t.helpButton.y=game.height/2*.9,t.helpButton.anchor=new Point(0,1),t.helpButton.scale=new Point(.5,.5),t.settingsWindow.y=120,t.statsWindow.x=game.width/2+0,t.statsWindow.y=game.height/2+120,t.pVpButton.x=0,t.pVpButton.y=.16*game.height,t.pVAIButton.x=0,t.pVAIButton.y=.05*-game.height,t.famobiMoreGames.x=-game.width/2*.9,t.famobiMoreGames.y=game.height/2*.8,t.famobiMoreGames.anchor=new Point(0,1),t.famobiMoreGames.y=t.copyright.y+.5*t.copyright.height,t.title.y=-game.height/2*.6);String(Math.abs(a-document.getElementById("mygame").clientHeight)/2);t.menuCanvas.x=game.width/2,t.menuCanvas.y=game.height/2,t.rack.y=game.height/2*.1,t.copyright.x=game.width/2-40,t.copyright.y=game.height/2-40},projectInfo.tutorial=!1,projectInfo.clickedHelpButton=!1,game.stage.backgroundColor="#666666",t.menuCanvas=new Phaser.Group(game,game.stage,"menuCanvas"),t.menuCanvas.alpha=0,t.menuCanvas.x=game.width/2,t.menuCanvas.y=game.height/2,t.menuVisible=!0,t.copyright=new Phaser.Sprite(game,0,0,"famobi"),t.copyright.anchor=new Point(1,1),window.famobi.hasFeature("credits")&&t.menuCanvas.addChild(t.copyright),t.title=new Phaser.Sprite(game,0,0,"title"),t.menuCanvas.addChild(t.title),t.title.anchor=new Point(.5,.5),t.rack=new Phaser.Sprite(game,0,0,"rack"),t.menuCanvas.addChild(t.rack),t.rack.anchor=new Point(.5,.5),t.playButton=new Phaser.Button(game,0,0,"playButton",(function(){g(),t.pVpButton.alpha=0,t.pVpButton.visible=!0,game.add.tween(t.pVpButton).to({alpha:1},500,"Linear",!0),t.pVAIButton.alpha=0,t.pVAIButton.visible=!0,game.add.tween(t.pVAIButton).to({alpha:1},500,"Linear",!0),window.famobi_analytics.trackScreen("SCREEN_LEVELSELECT")}),this,1,0,1,0),t.menuCanvas.addChild(t.playButton),t.playButton.anchor=new Phaser.Point(.5,1),t.pVpButton=new Phaser.Button(game,0,0,"pVpButton",(function(){projectInfo.mode=2,projectInfo.levelName="2players",game.add.tween(t.menuCanvas).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0).onComplete.add(h,this)}),this,1,0,1,0),window.famobi.hasFeature("multiplayer_local")&&t.menuCanvas.addChild(t.pVpButton),t.pVpButton.anchor=new Phaser.Point(.5,0),t.pVpButton.visible=!1,t.pVAIButton=new Phaser.Button(game,0,0,"pVAIButton",(function(){projectInfo.mode=1,projectInfo.levelName="1player_"+projectInfo.aiRating.toString(),game.add.tween(t.menuCanvas).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0).onComplete.add(h,this)}),this,1,0,1,0),t.menuCanvas.addChild(t.pVAIButton),t.pVAIButton.anchor=new Phaser.Point(.5,0),t.pVAIButton.visible=!1,t.statsButton=new Phaser.Button(game,0,0,"statsButton",(function(){t.menuVisible=!1,t.statsWindow.alpha=0,t.statsWindow.visible=!0,game.add.tween(t.statsWindow).to({alpha:1},500,"Linear",!0),g(),window.famobi_analytics.trackScreen("SCREEN_OTHER","SCREEN_STATISTICS")}),this,1,0,1,0),t.menuCanvas.addChild(t.statsButton),t.helpButton=new Phaser.Button(game,0,0,"helpButton",(function(){projectInfo.tutorial=!0,projectInfo.mode=2,projectInfo.clickedHelpButton=!0,game.state.start("play"),window.famobi_analytics.trackScreen("SCREEN_HELP")}),this,1,0,1,0),t.menuCanvas.addChild(t.helpButton),t.settingsButton=new Phaser.Button(game,0,0,"settingsButton",(function(){t.menuVisible=!1,t.settingsWindow.alpha=0,t.settingsWindow.visible=!0,game.add.tween(t.settingsWindow).to({alpha:1},500,"Linear",!0),g(),window.famobi_analytics.trackScreen("SCREEN_SETTINGS")}),this,1,0,1,0),t.menuCanvas.addChild(t.settingsButton),t.statsWindow=new Phaser.Group(game,t.menuCanvas,"statsWindow",!0),t.statsWindow.anchor=new Point(.5,.5),t.statsWindow.visible=!1;let e=-50;var n=new Phaser.Sprite(game,-150,-170,"highScore");n.anchor=new Point(.5,.5),n.scale=new Point(.9,.9),t.statsWindow.addChild(n);var a=new Phaser.Sprite(game,-150,e,"clockIcon");a.anchor=new Point(.5,.5),a.scale=new Point(.9,.9),t.statsWindow.addChild(a);var o=new Phaser.Sprite(game,-150,70,"gameController");o.anchor=new Point(.5,.5),t.statsWindow.addChild(o),t.highscoreText=new Phaser.BitmapText(game,150,-170,"font7",projectInfo.bestScore,77),t.highscoreText.anchor=new Point(.5,.5),t.statsWindow.addChild(t.highscoreText);var i=Math.floor(projectInfo.bestTime/60),s=Math.floor(i/60),m=Math.ceil(i%60),u=m.toString();m<10&&(u="0"+m.toString());var r=s.toString()+":"+u;0==projectInfo.bestTime&&(r="--:--"),t.bestTimeText=new Phaser.BitmapText(game,150,e,"font7",r,77),t.bestTimeText.anchor=new Point(.5,.5),t.statsWindow.addChild(t.bestTimeText),t.numGamesText=new Phaser.BitmapText(game,150,70,"font7",projectInfo.numGames,77),t.numGamesText.anchor=new Point(.5,.5),t.statsWindow.addChild(t.numGamesText),t.quitStatsButton=new Phaser.Button(game,0,288,"quitButton",(function(){showMenuItems()}),this,1,0,1,0),t.quitStatsButton.anchor=new Point(.5,.5),t.quitStatsButton.scale=new Point(.6,.6),t.statsWindow.addChild(t.quitStatsButton);let l=famobi.hasFeature("external_mute");t.settingsWindow=new Phaser.Sprite(game,0,0,"panel4"),t.menuCanvas.addChild(t.settingsWindow),t.settingsWindow.anchor=new Point(.5,.5),t.settingsWindow.visible=!1,t.quitSettingsButton=new Phaser.Button(game,0,238,"quitButton",(function(){showMenuItems()}),this,1,0,1,0),t.quitSettingsButton.anchor=new Point(.5,.5),t.quitSettingsButton.scale=new Point(.6,.6),t.settingsWindow.addChild(t.quitSettingsButton);t.guideSwitch=new Phaser.Button(game,15+(l?-200:-295),12,"switch",(function(){if(0==projectInfo.guideOn){projectInfo.guideOn=1,t.guideSwitch.setFrames(0,0,0);try{window.famobi.localStorage.setItem("guideOn",1)}catch(t){}}else{projectInfo.guideOn=0,t.guideSwitch.setFrames(1,1,1);try{window.famobi.localStorage.setItem("guideOn",0)}catch(t){}}}),this,0,0,0,0),t.guideSwitch.anchor=new Point(.5,.5),t.settingsWindow.addChild(t.guideSwitch),0==projectInfo.guideOn?(t.guideSwitch.setFrames(1,1,1),window.famobi.log("setting switch off")):window.famobi.log("guideOn: "+projectInfo.guideOn),t.soundSwitch=new Phaser.Button(game,310,12,"switch",(function(){0==Sound.slave?(Sound.setMute(!1),t.soundSwitch.setFrames(0,0,0),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_VOLUMECHANGE,{bgmVolume:0,sfxVolume:1})):(Sound.setMute(!0),t.soundSwitch.setFrames(1,1,1),window.famobi_analytics.trackEvent(famobi_analytics.EVENT_VOLUMECHANGE,{bgmVolume:0,sfxVolume:0}))}),this,0,0,0,0),t.soundSwitch.anchor=new Point(.5,.5),t.settingsWindow.addChild(t.soundSwitch),0==Sound.slave&&t.soundSwitch.setFrames(1,1,1),t.soundSwitch.visible=!l;let d=l?200:0;t.minusButton=new Phaser.Button(game,d-75,12,"minusButton",(function(){if(projectInfo.aiRating>1){projectInfo.aiRating--,t.ratingText.text=projectInfo.aiRating.toString();try{window.famobi.localStorage.setItem("aiRating",projectInfo.aiRating)}catch(t){}}}),this,1,0,1,0),t.minusButton.anchor=new Point(.5,.5),t.minusButton.scale=new Point(.6,.6),t.settingsWindow.addChild(t.minusButton),t.ratingText=new Phaser.BitmapText(game,d-5,20,"font7",projectInfo.aiRating.toString(),56),t.ratingText.anchor=new Point(.5,.5),t.settingsWindow.addChild(t.ratingText),t.plusButton=new Phaser.Button(game,d+75,12,"plusButton",(function(){if(projectInfo.aiRating<5){projectInfo.aiRating++,t.ratingText.text=projectInfo.aiRating.toString();try{window.famobi.localStorage.setItem("aiRating",projectInfo.aiRating)}catch(t){}}}),this,1,0,1,0),t.plusButton.anchor=new Point(.5,.5),t.plusButton.scale=new Point(.6,.6),t.settingsWindow.addChild(t.plusButton),t.famobiMoreGames=new Phaser.Button(game,0,0,"more_games",(function(){window.famobi.moreGamesLink()}),this,0,0,0,0),t.menuCanvas.addChild(t.famobiMoreGames),t.famobiMoreGames.scale.x=.6,t.famobiMoreGames.scale.y=.6,this.resizeGame();game.add.tween(t.menuCanvas).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,500);function h(){window.famobi_analytics.trackEvent("EVENT_LEVELSTART",{levelName:projectInfo.levelName}).then(function(){"true"!=window.famobi.localStorage.getItem("showTutorial")&&null!=window.famobi.localStorage.getItem("showTutorial")||0==projectInfo.tutorialPlayed&&(projectInfo.tutorial=!0),projectInfo.lastBreaker="none",game.state.start("play")}.bind(this))}function g(){t.rack.visible=!1,t.playButton.visible=!1,t.statsButton.visible=!1,t.helpButton.visible=!1,t.settingsButton.visible=!1}function c(){game.halt=!1,game.paused=!1}window.famobi_onPauseRequested=function(){window.famobi_wasVisibilityChangeDisabled=game.stage.disableVisibilityChange,game.stage.disableVisibilityChange=!0,game.paused=!0,window.famobi_pausedByAd=!0},window.famobi_onResumeRequested=function(){window.famobi_pausedByAd=!1,game.paused=!1,game.stage.disableVisibilityChange=window.famobi_wasVisibilityChangeDisabled},window.famobi.onRequest("disableAudio",(()=>{Sound.setMasterMute(!0),isGameMuted=!0})),window.famobi.onRequest("enableAudio",(()=>{Sound.setMasterMute(!1),isGameMuted=!1})),window.famobi.onRequest("pauseGameplay",(()=>{game.halt=!0,game.paused=!0})),window.famobi.onRequest("resumeGameplay",(()=>{game.halt=!1,game.paused=!1})),window.addEventListener("blur",(function(){game.halt=!0,game.paused=!0})),window.addEventListener("focus",(function(){c()})),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&c()})),0==famobi.getVolume()?(Sound.setMasterMute(!0),isGameMuted=!0):Sound.setMasterMute(!1),window.famobi.gameReady(),window.famobi.playerReady()},update:function(){var t=this.menuInfo;game.input.activePointer.isDown&&t.statsWindow.visible},shutdown:function(){menuInfo=this.menuInfo,game.stage.removeChild(menuInfo.menuCanvas),menuInfo.menuCanvas.destroy(),menuInfo=null}};function showMenuItems(){var t=menuState.menuInfo;t.settingsWindow.visible=!1,t.statsWindow.visible=!1,t.rack.visible=!0,t.rack.alpha=0,game.add.tween(t.rack).to({alpha:1},500,"Linear",!0),t.playButton.visible=!0,t.playButton.alpha=0,game.add.tween(t.playButton).to({alpha:1},500,"Linear",!0),t.statsButton.visible=!0,t.statsButton.alpha=0,game.add.tween(t.statsButton).to({alpha:1},500,"Linear",!0),t.helpButton.visible=!0,t.helpButton.alpha=0,game.add.tween(t.helpButton).to({alpha:1},500,"Linear",!0),t.settingsButton.visible=!0,t.settingsButton.alpha=0,game.add.tween(t.settingsButton).to({alpha:1},500,"Linear",!0),t.menuVisible=!0,window.famobi_analytics.trackScreen("SCREEN_HOME")}