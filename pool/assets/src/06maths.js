var Maths=function(){},Point=function(t,e){this.x=t,this.y=e};Point.interpolate=function(t,e,n){var r=Maths.fixNumber((1-n)*t.x+n*e.x),i=Maths.fixNumber((1-n)*t.y+n*e.y);return new Point(r,i)},Point.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},Maths.lineIntersectLine2=function(t,e,n,r){var i,x,a,u;if(t.x==e.x&&t.y==e.y||n.x==r.x&&n.y==r.y)return null;var s=new Point(e.x-t.x,e.y-t.y),y=new Point(n.x-t.x,n.y-t.y),f=new Point(r.x-t.x,r.y-t.y);return i=Maths.fixNumber(Math.sqrt(s.x*s.x+s.y*s.y)),x=Maths.fixNumber(s.x/i),a=Maths.fixNumber(s.y/i),__c=new Point(y.x*x+y.y*a,y.y*x-y.x*a),__d=new Point(f.x*x+f.y*a,f.y*x-f.x*a),__c.y<0&&__d.y<0||__c.y>=0&&__d.y>=0||(u=Maths.fixNumber(__d.x+(__c.x-__d.x)*__d.y/(__d.y-__c.y)))<0||u>i?null:new Point(t.x+u*x,t.y+u*a)},Maths.lineIntersectLine=function(t,e,n,r,i){var x,a,u,s,y,f,o;a=e.y-t.y,s=t.x-e.x,f=e.x*t.y-t.x*e.y,u=r.y-n.y,y=n.x-r.x,o=r.x*n.y-n.x*r.y;var h=a*y-u*s;if(0==h)return null;if((x=new Point).x=(s*o-y*f)/h,x.y=(u*f-a*o)/h,x.x=Maths.fixNumber(x.x),x.y=Maths.fixNumber(x.y),1){if((x.x-t.x)*(x.x-e.x)>0||(x.y-t.y)*(x.y-e.y)>0||(x.x-n.x)*(x.x-r.x)>0||(x.y-n.y)*(x.y-r.y)>0)return null}return x},Maths.lineIntersectCircle2=function(t,e,n,r){var i=new Object;i.inside=!1,i.tangent=!1,i.intersects=!1,i.enter=null,i.exit=null;var x=new Vector2D(t.x,t.y),a=new Vector2D(e.x,e.y),u=new Vector2D(n.x,n.y),s=a.minus(x),y=x.minus(u),f=s.dot(s),o=2*y.dot(s),h=o*o-4*f*(y.dot(y)-r*r);if(h<0)return i;if(0==(h=Maths.fixNumber(Math.sqrt(h))))return i.tangent=!0,i;var c=Maths.fixNumber((-o-h)/(2*f)),M=Maths.fixNumber((-o+h)/(2*f));return c>1&&M>1||c<0&&M<0?i:c<0&&M>1?(i.inside=!0,i):c>=0&&c<=1?(i.enter=Point.interpolate(t,e,M),i.enter=new Point(Maths.fixNumber(i.enter.x),Maths.fixNumber(i.enter.y)),i.intersects=!0,i):M>=0&&M<=1?(i.exit=Point.interpolate(t,e,c),i.exit=new Point(Maths.fixNumber(i.exit.x),Maths.fixNumber(i.exit.y)),i.intersects=!0,i):i},Maths.circleIntersectCircle=function(t,e,n,r,i,x){var a=new Object;if(n<0||x<0)return a=null;var u=x,s=n,y=Math.sqrt((t-r)*(t-r)+(e-i)*(e-i));if(y>n+x)return a=null;var f=(s*s+y*y-u*u)/(2*y),o=Math.sqrt(s*s-f*f);return a.x3=(r-t)*f/y+(i-e)*o/y+t,a.y3=(i-e)*f/y-(r-t)*o/y+e,a.x4=(r-t)*f/y-(i-e)*o/y+t,a.y4=(i-e)*f/y+(r-t)*o/y+e,a},Maths.lineIntersectCircle=function(t,e,n,r){var i=new Object;i.inside=!1,i.tangent=!1,i.intersects=!1,i.enter=null,i.exit=null;var x=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),a=2*((e.x-t.x)*(t.x-n.x)+(e.y-t.y)*(t.y-n.y)),u=n.x*n.x+n.y*n.y+t.x*t.x+t.y*t.y-2*(n.x*t.x+n.y*t.y)-r*r,s=Maths.fixNumber(a*a-4*x*u);if(s<=0)i.inside=!1;else{var y=Maths.fixNumber(Math.sqrt(s)),f=Maths.fixNumber((-a+y)/(2*x)),o=Maths.fixNumber((-a-y)/(2*x));(f<0||f>1)&&(o<0||o>1)?i.inside=!(f<0&&o<0||f>1&&o>1):(0<=o&&o<=1&&(i.enter=Point.interpolate(t,e,o),i.enter=new Point(Maths.fixNumber(i.enter.x),Maths.fixNumber(i.enter.y))),0<=f&&f<=1&&(i.exit=Point.interpolate(t,e,f),i.exit=new Point(Maths.fixNumber(i.exit.x),Maths.fixNumber(i.exit.y))),i.intersects=!0,null!=i.exit&&null!=i.enter&&i.exit.equals(i.enter)&&(i.tangent=!0))}return i},Maths.findBearing=function(t,e){var n=180/Math.PI*Math.atan2(e,t);return Maths.fixNumber(n)},Maths.angleDiff=function(t,e){var n=Maths.wrapValue(t+180-e)-180;return Maths.fixNumber(n)},Maths.wrapValue=function(t){return t>360&&(t-=360),t<0&&(t+=360),t},Maths.wrapInfinite=function(t){},Maths.fixNumber=function(t){return isNaN(Number(t))?0:Math.round(1e4*Number(t))/1e4},Maths.createVectorFrom2Points=function(t,e){return new Vector2D(e.x-t.x,e.y-t.y)},Maths.checkObjectsConverging=function(t,e,n,r){var i=r.minus(n),x=e.minus(t).normalize();return i.angleBetween(x)>90};